-------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/silja/Desktop/Empirical Research Paper_19June22/DataPreparation.log
  log type:  text
 opened on:  19 Jun 2022, 10:39:34

. 
. use "ESS_data_finalversion_.dta", clear

. 
. 
. 
. **********************************************************************************************************************
. * Step 2: adjusting the ESS dataset to our needs before combining with World Bank dataset: variable "country of birth"
. **********************************************************************************************************************
. 
. 
. * 2.1: analysing country of birth variables
. *******************************************
. browse cntry cntbrth cntbrtha cntbrthb cntbrthc // All persons who have a value in variable "cntbrth" have the same value in variable "cntbrtha", and
>  notably in "cntbrth" there are some country indications, which are not useful for us. For example, in "cntbrth" Yugoslavia is treated as a country a
> nd later it isn't anymore as it seized to exist. In our time-series analysis we will only consider countries that already have existed at the beginni
> ng of the analysis period and who existed at least until its end. Therefore, we decide to not use the data in "cntbrth" but only the data in the vari
> ables "cntbrtha", "cntbrthb" and "cntbrthc". Using this data we make a new variable compromosing all countries of birth (). - We call this variable "
> cntbrth_allwaves".

. 
. 
. * 2.2: changing three relevant variables from character to numeric 
. ******************************************************************
. /* Before combining the three variables, we need to make sure that their values are numeric. In order to achieve this, we have to transform them firs
> t. We try to transform them through the command "kountry", which also ensures
> that the country values are in the format "ISO 3166-1 alpha-3", which corresponds to the format of the country values
> in the World Bank data (which we will later add to this dataset). Currently, the ESS country names are in "ISO 3166-1 alpha-2" format (or short: "iso
> 2c") and the World Bank country names are in "ISO 3166-1 alpha-3" format (or short: "iso3c").
> */
. ssc install kountry // function to change labels for country variables downloaded
checking kountry consistency and verifying not already installed...
all files already exist and are up to date.

. 
. /*
> Bringing all values in the ESS dataset to "iso3c" format (that has a character value for each country) didn't work with the functions generate and re
> place. It worked when having the country values in a numerical format.
> 
> Bringing values in the ESS dataset all to "ISO 3166-1 numeric" format (that has a numerical value for each country):
> */
. 
. kountry cntbrtha, from(iso2c) to(iso3n) marker

--------------------------------------------
You are converting from iso2c to iso3n....
--------------------------------------------

--------------------------------------------------------------
The command has finished.
The new variables are named NAMES_STD, MARKER, and _ISO3N_.
--------------------------------------------------------------

. tab _ISO3N_ MARKER // "AE" was not standardized successfully into "784" for its one single observation, all other country codes were standardized suc
> cessfully (N[total]=10,658)

  ISO 3166 |
   numeric |        MARKER
      code |         0          1 |     Total
-----------+----------------------+----------
         4 |         0         30 |        30 
         8 |         0        176 |       176 
        12 |         0        111 |       111 
        24 |         0        106 |       106 
        28 |         0          1 |         1 
        31 |         0         34 |        34 
        32 |         0         53 |        53 
        36 |         0         49 |        49 
        40 |         0        106 |       106 
        50 |         0         19 |        19 
        51 |         0         31 |        31 
        56 |         0        173 |       173 
        60 |         0          1 |         1 
        68 |         0         14 |        14 
        70 |         0        245 |       245 
        76 |         0        111 |       111 
        84 |         0          1 |         1 
        90 |         0          1 |         1 
        96 |         0          1 |         1 
       100 |         0         59 |        59 
       108 |         0          7 |         7 
       112 |         0        129 |       129 
       116 |         0          4 |         4 
       120 |         0         13 |        13 
       124 |         0         58 |        58 
       132 |         0         58 |        58 
       140 |         0          4 |         4 
       144 |         0         48 |        48 
       148 |         0          2 |         2 
       152 |         0         44 |        44 
       156 |         0         41 |        41 
       170 |         0         39 |        39 
       174 |         0          2 |         2 
       175 |         0          1 |         1 
       178 |         0         56 |        56 
       180 |         0         14 |        14 
       188 |         0          1 |         1 
       191 |         0        185 |       185 
       192 |         0          8 |         8 
       196 |         0         13 |        13 
       203 |         0        138 |       138 
       204 |         0          1 |         1 
       208 |         0         83 |        83 
       212 |         0          1 |         1 
       214 |         0         12 |        12 
       218 |         0         46 |        46 
       222 |         0          4 |         4 
       231 |         0         27 |        27 
       232 |         0          6 |         6 
       233 |         0         32 |        32 
       234 |         0          9 |         9 
       246 |         0        162 |       162 
       250 |         0        423 |       423 
       254 |         0          1 |         1 
       258 |         0          1 |         1 
       262 |         0          2 |         2 
       266 |         0          1 |         1 
       268 |         0         74 |        74 
       270 |         0          6 |         6 
       275 |         0          3 |         3 
       276 |         0        760 |       760 
       288 |         0         21 |        21 
       292 |         0          1 |         1 
       300 |         0         56 |        56 
       304 |         0          9 |         9 
       312 |         0          2 |         2 
       320 |         0          4 |         4 
       324 |         0         11 |        11 
       328 |         0          2 |         2 
       332 |         0          3 |         3 
       340 |         0          1 |         1 
       344 |         0         10 |        10 
       348 |         0         92 |        92 
       352 |         0         13 |        13 
       356 |         0        102 |       102 
       360 |         0         75 |        75 
       364 |         0        111 |       111 
       368 |         0        114 |       114 
       372 |         0         74 |        74 
       376 |         0          9 |         9 
       380 |         0        409 |       409 
       384 |         0          9 |         9 
       388 |         0         24 |        24 
       392 |         0         16 |        16 
       398 |         0        115 |       115 
       400 |         0          4 |         4 
       404 |         0         24 |        24 
       408 |         0          1 |         1 
       410 |         0         20 |        20 
       414 |         0         11 |        11 
       417 |         0         17 |        17 
       418 |         0          4 |         4 
       422 |         0         42 |        42 
       428 |         0         28 |        28 
       430 |         0          3 |         3 
       434 |         0         22 |        22 
       438 |         0          4 |         4 
       440 |         0         37 |        37 
       442 |         0          8 |         8 
       446 |         0          3 |         3 
       450 |         0          7 |         7 
       454 |         0          1 |         1 
       458 |         0         10 |        10 
       462 |         0          4 |         4 
       466 |         0          6 |         6 
       470 |         0          7 |         7 
       474 |         0          7 |         7 
       478 |         0          2 |         2 
       480 |         0         19 |        19 
       484 |         0          8 |         8 
       492 |         0          3 |         3 
       496 |         0          2 |         2 
       498 |         0         27 |        27 
       504 |         0        281 |       281 
       508 |         0         26 |        26 
       524 |         0          2 |         2 
       528 |         0        164 |       164 
       530 |         0         30 |        30 
       533 |         0          3 |         3 
       554 |         0         11 |        11 
       558 |         0          1 |         1 
       562 |         0          1 |         1 
       566 |         0         38 |        38 
       578 |         0         45 |        45 
       586 |         0         74 |        74 
       591 |         0          3 |         3 
       598 |         0          1 |         1 
       600 |         0          5 |         5 
       604 |         0         28 |        28 
       608 |         0         58 |        58 
       616 |         0        311 |       311 
       620 |         0        410 |       410 
       624 |         0          5 |         5 
       626 |         0          2 |         2 
       638 |         0         11 |        11 
       642 |         0        256 |       256 
       646 |         0         17 |        17 
       659 |         0          2 |         2 
       662 |         0          1 |         1 
       674 |         0          2 |         2 
       678 |         0          4 |         4 
       682 |         0          3 |         3 
       686 |         0         12 |        12 
       690 |         0          1 |         1 
       694 |         0          3 |         3 
       702 |         0          9 |         9 
       703 |         0        135 |       135 
       704 |         0         48 |        48 
       705 |         0         23 |        23 
       706 |         0         24 |        24 
       710 |         0         61 |        61 
       716 |         0         11 |        11 
       724 |         0        114 |       114 
       736 |         0         12 |        12 
       740 |         0         54 |        54 
       748 |         0          1 |         1 
       752 |         0        125 |       125 
       756 |         0         54 |        54 
       760 |         0         33 |        33 
       762 |         0         14 |        14 
       764 |         0         23 |        23 
       768 |         0          6 |         6 
       780 |         0          3 |         3 
       784 |         1          0 |         1 
       788 |         0         57 |        57 
       792 |         0        349 |       349 
       795 |         0          5 |         5 
       800 |         0         20 |        20 
       804 |         0        271 |       271 
       807 |         0         42 |        42 
       810 |         0      1,095 |     1,095 
       818 |         0         47 |        47 
       826 |         0        492 |       492 
       834 |         0          4 |         4 
       840 |         0        164 |       164 
       858 |         0         13 |        13 
       860 |         0         48 |        48 
       862 |         0         14 |        14 
       887 |         0         15 |        15 
       894 |         0          5 |         5 
-----------+----------------------+----------
     Total |         1     10,657 |    10,658 

. rename _ISO3N_ cntbrtha_ISO3N

. tab cntbrtha_ISO3N, nolabel missing

   ISO 3166 |
    numeric |
       code |      Freq.     Percent        Cum.
------------+-----------------------------------
          4 |         30        0.01        0.01
          8 |        176        0.04        0.05
         12 |        111        0.03        0.07
         24 |        106        0.03        0.10
         28 |          1        0.00        0.10
         31 |         34        0.01        0.11
         32 |         53        0.01        0.12
         36 |         49        0.01        0.13
         40 |        106        0.03        0.16
         50 |         19        0.00        0.16
         51 |         31        0.01        0.17
         56 |        173        0.04        0.21
         60 |          1        0.00        0.21
         68 |         14        0.00        0.21
         70 |        245        0.06        0.27
         76 |        111        0.03        0.30
         84 |          1        0.00        0.30
         90 |          1        0.00        0.30
         96 |          1        0.00        0.30
        100 |         59        0.01        0.31
        108 |          7        0.00        0.31
        112 |        129        0.03        0.34
        116 |          4        0.00        0.35
        120 |         13        0.00        0.35
        124 |         58        0.01        0.36
        132 |         58        0.01        0.38
        140 |          4        0.00        0.38
        144 |         48        0.01        0.39
        148 |          2        0.00        0.39
        152 |         44        0.01        0.40
        156 |         41        0.01        0.41
        170 |         39        0.01        0.42
        174 |          2        0.00        0.42
        175 |          1        0.00        0.42
        178 |         56        0.01        0.43
        180 |         14        0.00        0.44
        188 |          1        0.00        0.44
        191 |        185        0.04        0.48
        192 |          8        0.00        0.48
        196 |         13        0.00        0.48
        203 |        138        0.03        0.52
        204 |          1        0.00        0.52
        208 |         83        0.02        0.54
        212 |          1        0.00        0.54
        214 |         12        0.00        0.54
        218 |         46        0.01        0.55
        222 |          4        0.00        0.55
        231 |         27        0.01        0.56
        232 |          6        0.00        0.56
        233 |         32        0.01        0.57
        234 |          9        0.00        0.57
        246 |        162        0.04        0.61
        250 |        423        0.10        0.71
        254 |          1        0.00        0.71
        258 |          1        0.00        0.71
        262 |          2        0.00        0.71
        266 |          1        0.00        0.71
        268 |         74        0.02        0.73
        270 |          6        0.00        0.73
        275 |          3        0.00        0.73
        276 |        760        0.18        0.91
        288 |         21        0.00        0.91
        292 |          1        0.00        0.91
        300 |         56        0.01        0.93
        304 |          9        0.00        0.93
        312 |          2        0.00        0.93
        320 |          4        0.00        0.93
        324 |         11        0.00        0.93
        328 |          2        0.00        0.93
        332 |          3        0.00        0.93
        340 |          1        0.00        0.93
        344 |         10        0.00        0.94
        348 |         92        0.02        0.96
        352 |         13        0.00        0.96
        356 |        102        0.02        0.99
        360 |         75        0.02        1.00
        364 |        111        0.03        1.03
        368 |        114        0.03        1.06
        372 |         74        0.02        1.07
        376 |          9        0.00        1.08
        380 |        409        0.10        1.17
        384 |          9        0.00        1.17
        388 |         24        0.01        1.18
        392 |         16        0.00        1.18
        398 |        115        0.03        1.21
        400 |          4        0.00        1.21
        404 |         24        0.01        1.22
        408 |          1        0.00        1.22
        410 |         20        0.00        1.22
        414 |         11        0.00        1.23
        417 |         17        0.00        1.23
        418 |          4        0.00        1.23
        422 |         42        0.01        1.24
        428 |         28        0.01        1.25
        430 |          3        0.00        1.25
        434 |         22        0.01        1.25
        438 |          4        0.00        1.25
        440 |         37        0.01        1.26
        442 |          8        0.00        1.26
        446 |          3        0.00        1.27
        450 |          7        0.00        1.27
        454 |          1        0.00        1.27
        458 |         10        0.00        1.27
        462 |          4        0.00        1.27
        466 |          6        0.00        1.27
        470 |          7        0.00        1.27
        474 |          7        0.00        1.28
        478 |          2        0.00        1.28
        480 |         19        0.00        1.28
        484 |          8        0.00        1.28
        492 |          3        0.00        1.28
        496 |          2        0.00        1.28
        498 |         27        0.01        1.29
        504 |        281        0.07        1.36
        508 |         26        0.01        1.36
        524 |          2        0.00        1.36
        528 |        164        0.04        1.40
        530 |         30        0.01        1.41
        533 |          3        0.00        1.41
        554 |         11        0.00        1.41
        558 |          1        0.00        1.41
        562 |          1        0.00        1.41
        566 |         38        0.01        1.42
        578 |         45        0.01        1.43
        586 |         74        0.02        1.45
        591 |          3        0.00        1.45
        598 |          1        0.00        1.45
        600 |          5        0.00        1.45
        604 |         28        0.01        1.46
        608 |         58        0.01        1.47
        616 |        311        0.07        1.55
        620 |        410        0.10        1.64
        624 |          5        0.00        1.64
        626 |          2        0.00        1.64
        638 |         11        0.00        1.65
        642 |        256        0.06        1.71
        646 |         17        0.00        1.71
        659 |          2        0.00        1.71
        662 |          1        0.00        1.71
        674 |          2        0.00        1.71
        678 |          4        0.00        1.71
        682 |          3        0.00        1.71
        686 |         12        0.00        1.72
        690 |          1        0.00        1.72
        694 |          3        0.00        1.72
        702 |          9        0.00        1.72
        703 |        135        0.03        1.75
        704 |         48        0.01        1.76
        705 |         23        0.01        1.77
        706 |         24        0.01        1.77
        710 |         61        0.01        1.79
        716 |         11        0.00        1.79
        724 |        114        0.03        1.82
        736 |         12        0.00        1.82
        740 |         54        0.01        1.83
        748 |          1        0.00        1.83
        752 |        125        0.03        1.86
        756 |         54        0.01        1.88
        760 |         33        0.01        1.88
        762 |         14        0.00        1.89
        764 |         23        0.01        1.89
        768 |          6        0.00        1.89
        780 |          3        0.00        1.90
        784 |          1        0.00        1.90
        788 |         57        0.01        1.91
        792 |        349        0.08        1.99
        795 |          5        0.00        1.99
        800 |         20        0.00        2.00
        804 |        271        0.06        2.06
        807 |         42        0.01        2.07
        810 |      1,095        0.26        2.33
        818 |         47        0.01        2.34
        826 |        492        0.12        2.46
        834 |          4        0.00        2.46
        840 |        164        0.04        2.50
        858 |         13        0.00        2.50
        860 |         48        0.01        2.51
        862 |         14        0.00        2.51
        887 |         15        0.00        2.52
        894 |          5        0.00        2.52
          . |    412,327       97.48      100.00
------------+-----------------------------------
      Total |    422,985      100.00

. describe cntbrtha_ISO3N // The variable's storage type is integer (= whole number, anywhere between or including -32,767 and 32,740).

Variable      Storage   Display    Value
    name         type    format    label      Variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------
cntbrtha_ISO3N  int     %8.0g                 ISO 3166 numeric code

. 
. /* Controlling whether the country names were converted adequately (using "tab cntbrtha" and "tab cntbrtha_ISO3N"), we noticed that the new variable 
> (with the character values
> having been transformed to numerical values) has totally 118 data points less than the original variable. Searching for the transformation issues for
>  these 118 cases we detected all of the issues:
> 
> First, we noticed that 116 cases with the value "CS" for former "Czechoslovakia" were not transformed to a
> corresponding value in "ISO 3166-1 numeric" format. The reason is that at the moment - as the country doesn't exist anymore - there is no value defin
> ed anymore for Czechoslovakia.
> We will therefore exclude the participants born in Czechoslovakia from our analysis (through the command "kountry" they have already been excluded. -
>  In particular, we exclude them also because the World Bank doesn't report any recent GDP values for Czechoslovakia. 
> 
> Furthermore, we noticed that the value for the United Arab Erimates ("AE") was successfully transformed to "784" - it was not unsuccessful as it was 
> suggested by the above code.
> 
> Moreover, we noticed that 1 case with the value "AQ" for "Antarctica" (the territories south of 60Â° south latitude) were not transformed to a corresp
> onding value in "ISO 3166-1 numeric" format. We exclude this participant as the World Bank doesn't report any GDP values for Antarctica.
> 
> Lastly, one participant indicated Bouvet Island with the corresponding code "BV" as country of birth. This was not adequately transformed because Bou
> vet Island officially belongs to Norway. Therefore, we have manually recoded this participant (with idno = 1966) as being born in Norway because the 
> person is relevant for our analysis as they have migrated to Luxembourg and participated in the survey there.
> */
. 
. 
. drop NAMES_STD

. drop MARKER

. kountry cntbrthb, from(iso2c) to(iso3n) marker

--------------------------------------------
You are converting from iso2c to iso3n....
--------------------------------------------

--------------------------------------------------------------
The command has finished.
The new variables are named NAMES_STD, MARKER, and _ISO3N_.
--------------------------------------------------------------

. tab _ISO3N_ MARKER // "AE" was not standardized successfully into "784" for its one single observation, all other country codes were standardized suc
> cessfully (N[total]=9,594)

  ISO 3166 |
   numeric |        MARKER
      code |         0          1 |     Total
-----------+----------------------+----------
         4 |         0         19 |        19 
         8 |         0        198 |       198 
        12 |         0         82 |        82 
        24 |         0         64 |        64 
        28 |         0          1 |         1 
        31 |         0         44 |        44 
        32 |         0         53 |        53 
        36 |         0         31 |        31 
        40 |         0         69 |        69 
        50 |         0         15 |        15 
        51 |         0         26 |        26 
        56 |         0         44 |        44 
        68 |         0         25 |        25 
        70 |         0        377 |       377 
        72 |         0          1 |         1 
        76 |         0        127 |       127 
        96 |         0          1 |         1 
       100 |         0         91 |        91 
       108 |         0          4 |         4 
       112 |         0        208 |       208 
       116 |         0          5 |         5 
       120 |         0         10 |        10 
       124 |         0         38 |        38 
       132 |         0         27 |        27 
       140 |         0          1 |         1 
       144 |         0         32 |        32 
       152 |         0         30 |        30 
       156 |         0         45 |        45 
       158 |         0          2 |         2 
       170 |         0         43 |        43 
       174 |         0          3 |         3 
       178 |         0         30 |        30 
       180 |         0         21 |        21 
       188 |         0          1 |         1 
       191 |         0         92 |        92 
       192 |         0         17 |        17 
       196 |         0         11 |        11 
       203 |         0        109 |       109 
       204 |         0          1 |         1 
       208 |         0         40 |        40 
       214 |         0          9 |         9 
       218 |         0         47 |        47 
       222 |         0          1 |         1 
       231 |         0         58 |        58 
       232 |         0         10 |        10 
       233 |         0         25 |        25 
       234 |         0          4 |         4 
       246 |         0         88 |        88 
       250 |         0        243 |       243 
       266 |         0          3 |         3 
       268 |         0         65 |        65 
       270 |         0          4 |         4 
       275 |         0          2 |         2 
       276 |         0        429 |       429 
       288 |         0         19 |        19 
       292 |         0          1 |         1 
       300 |         0         61 |        61 
       304 |         0          7 |         7 
       308 |         0          1 |         1 
       312 |         0          2 |         2 
       320 |         0          5 |         5 
       324 |         0         17 |        17 
       328 |         0          5 |         5 
       332 |         0          1 |         1 
       340 |         0          3 |         3 
       344 |         0          9 |         9 
       348 |         0         71 |        71 
       352 |         0         12 |        12 
       356 |         0        134 |       134 
       360 |         0         38 |        38 
       364 |         0        101 |       101 
       368 |         0        121 |       121 
       372 |         0         33 |        33 
       376 |         0          8 |         8 
       380 |         0        198 |       198 
       384 |         0          8 |         8 
       388 |         0         22 |        22 
       392 |         0          9 |         9 
       398 |         0        150 |       150 
       400 |         0          7 |         7 
       404 |         0         18 |        18 
       408 |         0          7 |         7 
       410 |         0         19 |        19 
       414 |         0          2 |         2 
       417 |         0         27 |        27 
       418 |         0          1 |         1 
       422 |         0         43 |        43 
       428 |         0         56 |        56 
       430 |         0          1 |         1 
       434 |         0         31 |        31 
       438 |         0          2 |         2 
       440 |         0         74 |        74 
       442 |         0          5 |         5 
       446 |         0          4 |         4 
       450 |         0          9 |         9 
       458 |         0         10 |        10 
       462 |         0          1 |         1 
       466 |         0          1 |         1 
       470 |         0          4 |         4 
       474 |         0          2 |         2 
       478 |         0          1 |         1 
       480 |         0         10 |        10 
       484 |         0          9 |         9 
       496 |         0          1 |         1 
       498 |         0         61 |        61 
       499 |         0          6 |         6 
       500 |         0          1 |         1 
       504 |         0        361 |       361 
       508 |         0         26 |        26 
       516 |         0          1 |         1 
       524 |         0          4 |         4 
       528 |         0         77 |        77 
       530 |         0         11 |        11 
       533 |         0          5 |         5 
       554 |         0          6 |         6 
       558 |         0          2 |         2 
       566 |         0         63 |        63 
       578 |         0         34 |        34 
       586 |         0         72 |        72 
       591 |         0          3 |         3 
       600 |         0          6 |         6 
       604 |         0         28 |        28 
       608 |         0         50 |        50 
       616 |         0        416 |       416 
       620 |         0         91 |        91 
       624 |         0          4 |         4 
       630 |         0          1 |         1 
       638 |         0          1 |         1 
       642 |         0        304 |       304 
       646 |         0          6 |         6 
       662 |         0          2 |         2 
       678 |         0          6 |         6 
       682 |         0          2 |         2 
       686 |         0         18 |        18 
       694 |         0          3 |         3 
       702 |         0          6 |         6 
       703 |         0         75 |        75 
       704 |         0         21 |        21 
       705 |         0         29 |        29 
       706 |         0         23 |        23 
       710 |         0         45 |        45 
       716 |         0         20 |        20 
       724 |         0         74 |        74 
       736 |         0          4 |         4 
       740 |         0         31 |        31 
       748 |         0          2 |         2 
       752 |         0         85 |        85 
       756 |         0         26 |        26 
       760 |         0         46 |        46 
       762 |         0         22 |        22 
       764 |         0         25 |        25 
       768 |         0          8 |         8 
       780 |         0          3 |         3 
       784 |         1          0 |         1 
       788 |         0         80 |        80 
       792 |         0        214 |       214 
       795 |         0          9 |         9 
       800 |         0          7 |         7 
       804 |         0        406 |       406 
       807 |         0         38 |        38 
       810 |         0      1,400 |     1,400 
       818 |         0         40 |        40 
       826 |         0        363 |       363 
       834 |         0          4 |         4 
       840 |         0        124 |       124 
       854 |         0          2 |         2 
       858 |         0         15 |        15 
       860 |         0         92 |        92 
       862 |         0         24 |        24 
       887 |         0         50 |        50 
       890 |         0         96 |        96 
       894 |         0          6 |         6 
-----------+----------------------+----------
     Total |         1      9,593 |     9,594 

. rename _ISO3N_ cntbrthb_ISO3N

. tab cntbrthb_ISO3N, nolabel missing

   ISO 3166 |
    numeric |
       code |      Freq.     Percent        Cum.
------------+-----------------------------------
          4 |         19        0.00        0.00
          8 |        198        0.05        0.05
         12 |         82        0.02        0.07
         24 |         64        0.02        0.09
         28 |          1        0.00        0.09
         31 |         44        0.01        0.10
         32 |         53        0.01        0.11
         36 |         31        0.01        0.12
         40 |         69        0.02        0.13
         50 |         15        0.00        0.14
         51 |         26        0.01        0.14
         56 |         44        0.01        0.15
         68 |         25        0.01        0.16
         70 |        377        0.09        0.25
         72 |          1        0.00        0.25
         76 |        127        0.03        0.28
         96 |          1        0.00        0.28
        100 |         91        0.02        0.30
        108 |          4        0.00        0.30
        112 |        208        0.05        0.35
        116 |          5        0.00        0.35
        120 |         10        0.00        0.35
        124 |         38        0.01        0.36
        132 |         27        0.01        0.37
        140 |          1        0.00        0.37
        144 |         32        0.01        0.38
        152 |         30        0.01        0.38
        156 |         45        0.01        0.39
        158 |          2        0.00        0.39
        170 |         43        0.01        0.40
        174 |          3        0.00        0.41
        178 |         30        0.01        0.41
        180 |         21        0.00        0.42
        188 |          1        0.00        0.42
        191 |         92        0.02        0.44
        192 |         17        0.00        0.44
        196 |         11        0.00        0.45
        203 |        109        0.03        0.47
        204 |          1        0.00        0.47
        208 |         40        0.01        0.48
        214 |          9        0.00        0.48
        218 |         47        0.01        0.50
        222 |          1        0.00        0.50
        231 |         58        0.01        0.51
        232 |         10        0.00        0.51
        233 |         25        0.01        0.52
        234 |          4        0.00        0.52
        246 |         88        0.02        0.54
        250 |        243        0.06        0.60
        266 |          3        0.00        0.60
        268 |         65        0.02        0.61
        270 |          4        0.00        0.61
        275 |          2        0.00        0.61
        276 |        429        0.10        0.72
        288 |         19        0.00        0.72
        292 |          1        0.00        0.72
        300 |         61        0.01        0.73
        304 |          7        0.00        0.74
        308 |          1        0.00        0.74
        312 |          2        0.00        0.74
        320 |          5        0.00        0.74
        324 |         17        0.00        0.74
        328 |          5        0.00        0.74
        332 |          1        0.00        0.74
        340 |          3        0.00        0.74
        344 |          9        0.00        0.75
        348 |         71        0.02        0.76
        352 |         12        0.00        0.77
        356 |        134        0.03        0.80
        360 |         38        0.01        0.81
        364 |        101        0.02        0.83
        368 |        121        0.03        0.86
        372 |         33        0.01        0.87
        376 |          8        0.00        0.87
        380 |        198        0.05        0.92
        384 |          8        0.00        0.92
        388 |         22        0.01        0.92
        392 |          9        0.00        0.92
        398 |        150        0.04        0.96
        400 |          7        0.00        0.96
        404 |         18        0.00        0.97
        408 |          7        0.00        0.97
        410 |         19        0.00        0.97
        414 |          2        0.00        0.97
        417 |         27        0.01        0.98
        418 |          1        0.00        0.98
        422 |         43        0.01        0.99
        428 |         56        0.01        1.00
        430 |          1        0.00        1.00
        434 |         31        0.01        1.01
        438 |          2        0.00        1.01
        440 |         74        0.02        1.03
        442 |          5        0.00        1.03
        446 |          4        0.00        1.03
        450 |          9        0.00        1.03
        458 |         10        0.00        1.04
        462 |          1        0.00        1.04
        466 |          1        0.00        1.04
        470 |          4        0.00        1.04
        474 |          2        0.00        1.04
        478 |          1        0.00        1.04
        480 |         10        0.00        1.04
        484 |          9        0.00        1.04
        496 |          1        0.00        1.04
        498 |         61        0.01        1.06
        499 |          6        0.00        1.06
        500 |          1        0.00        1.06
        504 |        361        0.09        1.14
        508 |         26        0.01        1.15
        516 |          1        0.00        1.15
        524 |          4        0.00        1.15
        528 |         77        0.02        1.17
        530 |         11        0.00        1.17
        533 |          5        0.00        1.17
        554 |          6        0.00        1.17
        558 |          2        0.00        1.17
        566 |         63        0.01        1.19
        578 |         34        0.01        1.20
        586 |         72        0.02        1.21
        591 |          3        0.00        1.22
        600 |          6        0.00        1.22
        604 |         28        0.01        1.22
        608 |         50        0.01        1.24
        616 |        416        0.10        1.33
        620 |         91        0.02        1.35
        624 |          4        0.00        1.36
        630 |          1        0.00        1.36
        638 |          1        0.00        1.36
        642 |        304        0.07        1.43
        646 |          6        0.00        1.43
        662 |          2        0.00        1.43
        678 |          6        0.00        1.43
        682 |          2        0.00        1.43
        686 |         18        0.00        1.44
        694 |          3        0.00        1.44
        702 |          6        0.00        1.44
        703 |         75        0.02        1.46
        704 |         21        0.00        1.46
        705 |         29        0.01        1.47
        706 |         23        0.01        1.47
        710 |         45        0.01        1.48
        716 |         20        0.00        1.49
        724 |         74        0.02        1.51
        736 |          4        0.00        1.51
        740 |         31        0.01        1.51
        748 |          2        0.00        1.51
        752 |         85        0.02        1.54
        756 |         26        0.01        1.54
        760 |         46        0.01        1.55
        762 |         22        0.01        1.56
        764 |         25        0.01        1.56
        768 |          8        0.00        1.57
        780 |          3        0.00        1.57
        784 |          1        0.00        1.57
        788 |         80        0.02        1.58
        792 |        214        0.05        1.64
        795 |          9        0.00        1.64
        800 |          7        0.00        1.64
        804 |        406        0.10        1.74
        807 |         38        0.01        1.74
        810 |      1,400        0.33        2.08
        818 |         40        0.01        2.08
        826 |        363        0.09        2.17
        834 |          4        0.00        2.17
        840 |        124        0.03        2.20
        854 |          2        0.00        2.20
        858 |         15        0.00        2.20
        860 |         92        0.02        2.23
        862 |         24        0.01        2.23
        887 |         50        0.01        2.24
        890 |         96        0.02        2.27
        894 |          6        0.00        2.27
          . |    413,391       97.73      100.00
------------+-----------------------------------
      Total |    422,985      100.00

. 
. 
. /*
> Controlling whether the country names were converted adequately (using "tab cntbrthb" and "tab cntbrthb_ISO3N"), we noticed that the new variable (wi
> th the character values having been transformed to numerical values) has totally 2 data points less than the original variable. Searching for the tra
> nsformation issues for these 2 cases we were unable to detect them. As the funtion "kountry" seems to have worked very well in the above case (only n
> ot functioning for countries that don't exist anymore), we suspect the issue to have arisen due to country codes of countries that don't officially e
> xist (anymore). We could anyway not include these countries into the analysis because of missing GDP data.
> 
> Furthermore, we noticed that the value for the United Arab Erimates ("AE") was successfully transformed to "784" - it was not unsuccessful as it was 
> suggested by the above code.
> */
. 
. 
. drop NAMES_STD

. drop MARKER

. kountry cntbrthc, from(iso2c) to(iso3n) marker

--------------------------------------------
You are converting from iso2c to iso3n....
--------------------------------------------

--------------------------------------------------------------
The command has finished.
The new variables are named NAMES_STD, MARKER, and _ISO3N_.
--------------------------------------------------------------

. tab _ISO3N_ MARKER // "AE" was not standardized successfully into "784" for its two observations, for all other country codes this wasn't the case (N
> [total]=12,979)

  ISO 3166 |
   numeric |        MARKER
      code |         0          1 |     Total
-----------+----------------------+----------
         4 |         0         53 |        53 
         8 |         0         56 |        56 
        12 |         0        172 |       172 
        16 |         0          1 |         1 
        24 |         0         88 |        88 
        31 |         0         46 |        46 
        32 |         0        104 |       104 
        36 |         0         42 |        42 
        40 |         0        102 |       102 
        50 |         0         16 |        16 
        51 |         0         51 |        51 
        56 |         0         61 |        61 
        68 |         0         27 |        27 
        70 |         0        274 |       274 
        76 |         0        174 |       174 
        96 |         0          4 |         4 
       100 |         0        108 |       108 
       104 |         0          1 |         1 
       108 |         0          6 |         6 
       112 |         0        213 |       213 
       116 |         0          2 |         2 
       120 |         0         20 |        20 
       124 |         0         40 |        40 
       132 |         0         43 |        43 
       140 |         0          5 |         5 
       144 |         0         38 |        38 
       148 |         0          6 |         6 
       152 |         0         41 |        41 
       156 |         0         67 |        67 
       158 |         0          1 |         1 
       170 |         0         69 |        69 
       174 |         0          3 |         3 
       175 |         0          1 |         1 
       178 |         0         30 |        30 
       180 |         0         49 |        49 
       188 |         0          3 |         3 
       191 |         0        159 |       159 
       192 |         0         25 |        25 
       196 |         0          3 |         3 
       203 |         0         79 |        79 
       204 |         0          5 |         5 
       208 |         0         76 |        76 
       212 |         0          1 |         1 
       214 |         0         32 |        32 
       218 |         0         61 |        61 
       222 |         0          5 |         5 
       226 |         0          8 |         8 
       231 |         0         91 |        91 
       232 |         0         17 |        17 
       233 |         0         59 |        59 
       234 |         0          9 |         9 
       246 |         0        103 |       103 
       250 |         0        338 |       338 
       254 |         0          1 |         1 
       258 |         0          1 |         1 
       262 |         0          2 |         2 
       266 |         0          3 |         3 
       268 |         0         92 |        92 
       270 |         0          7 |         7 
       275 |         0         11 |        11 
       276 |         0        603 |       603 
       288 |         0         20 |        20 
       300 |         0         73 |        73 
       304 |         0          2 |         2 
       308 |         0          2 |         2 
       312 |         0          1 |         1 
       320 |         0          4 |         4 
       324 |         0         13 |        13 
       328 |         0          4 |         4 
       332 |         0          1 |         1 
       340 |         0          6 |         6 
       344 |         0          6 |         6 
       348 |         0         83 |        83 
       352 |         0         15 |        15 
       356 |         0        234 |       234 
       360 |         0         55 |        55 
       364 |         0        154 |       154 
       368 |         0        199 |       199 
       372 |         0         70 |        70 
       376 |         0          8 |         8 
       380 |         0        265 |       265 
       384 |         0         21 |        21 
       388 |         0         20 |        20 
       392 |         0         21 |        21 
       398 |         0        176 |       176 
       400 |         0          6 |         6 
       404 |         0         23 |        23 
       408 |         0          2 |         2 
       410 |         0         28 |        28 
       414 |         0          5 |         5 
       417 |         0         23 |        23 
       418 |         0          4 |         4 
       422 |         0         37 |        37 
       426 |         0          1 |         1 
       428 |         0         80 |        80 
       430 |         0          1 |         1 
       434 |         0         42 |        42 
       438 |         0          1 |         1 
       440 |         0        108 |       108 
       442 |         0          8 |         8 
       450 |         0         12 |        12 
       454 |         0          1 |         1 
       458 |         0         17 |        17 
       466 |         0          5 |         5 
       470 |         0          2 |         2 
       474 |         0          4 |         4 
       478 |         0          2 |         2 
       480 |         0          9 |         9 
       484 |         0         28 |        28 
       496 |         0          4 |         4 
       498 |         0         64 |        64 
       499 |         0          9 |         9 
       504 |         0        554 |       554 
       508 |         0         34 |        34 
       524 |         0         14 |        14 
       528 |         0        145 |       145 
       533 |         0          6 |         6 
       540 |         0          1 |         1 
       554 |         0         11 |        11 
       558 |         0          3 |         3 
       562 |         0          5 |         5 
       566 |         0         63 |        63 
       578 |         0         41 |        41 
       586 |         0        108 |       108 
       591 |         0          2 |         2 
       598 |         0          1 |         1 
       600 |         0         12 |        12 
       604 |         0         55 |        55 
       608 |         0         66 |        66 
       616 |         0        683 |       683 
       620 |         0        194 |       194 
       624 |         0         11 |        11 
       626 |         0          2 |         2 
       630 |         0          2 |         2 
       638 |         0          3 |         3 
       642 |         0        495 |       495 
       646 |         0         13 |        13 
       662 |         0          1 |         1 
       678 |         0          8 |         8 
       682 |         0          4 |         4 
       686 |         0         30 |        30 
       690 |         0          1 |         1 
       694 |         0          6 |         6 
       702 |         0          5 |         5 
       703 |         0        119 |       119 
       704 |         0         46 |        46 
       705 |         0         25 |        25 
       706 |         0         56 |        56 
       710 |         0         71 |        71 
       716 |         0         23 |        23 
       724 |         0         99 |        99 
       736 |         0          8 |         8 
       740 |         0         55 |        55 
       748 |         0          1 |         1 
       752 |         0        134 |       134 
       756 |         0         54 |        54 
       760 |         0         69 |        69 
       762 |         0         25 |        25 
       764 |         0         50 |        50 
       768 |         0          4 |         4 
       780 |         0          2 |         2 
       784 |         2          0 |         2 
       788 |         0        123 |       123 
       792 |         0        320 |       320 
       795 |         0         11 |        11 
       800 |         0         10 |        10 
       804 |         0        549 |       549 
       807 |         0         65 |        65 
       810 |         0      1,494 |     1,494 
       818 |         0         65 |        65 
       826 |         0        564 |       564 
       834 |         0          9 |         9 
       840 |         0        205 |       205 
       854 |         0          6 |         6 
       858 |         0         19 |        19 
       860 |         0         91 |        91 
       862 |         0         46 |        46 
       887 |         0         52 |        52 
       890 |         0        133 |       133 
       894 |         0          8 |         8 
-----------+----------------------+----------
     Total |         2     12,977 |    12,979 

. rename _ISO3N_ cntbrthc_ISO3N

. tab cntbrthc_ISO3N, nolabel missing

   ISO 3166 |
    numeric |
       code |      Freq.     Percent        Cum.
------------+-----------------------------------
          4 |         53        0.01        0.01
          8 |         56        0.01        0.03
         12 |        172        0.04        0.07
         16 |          1        0.00        0.07
         24 |         88        0.02        0.09
         31 |         46        0.01        0.10
         32 |        104        0.02        0.12
         36 |         42        0.01        0.13
         40 |        102        0.02        0.16
         50 |         16        0.00        0.16
         51 |         51        0.01        0.17
         56 |         61        0.01        0.19
         68 |         27        0.01        0.19
         70 |        274        0.06        0.26
         76 |        174        0.04        0.30
         96 |          4        0.00        0.30
        100 |        108        0.03        0.33
        104 |          1        0.00        0.33
        108 |          6        0.00        0.33
        112 |        213        0.05        0.38
        116 |          2        0.00        0.38
        120 |         20        0.00        0.38
        124 |         40        0.01        0.39
        132 |         43        0.01        0.40
        140 |          5        0.00        0.40
        144 |         38        0.01        0.41
        148 |          6        0.00        0.41
        152 |         41        0.01        0.42
        156 |         67        0.02        0.44
        158 |          1        0.00        0.44
        170 |         69        0.02        0.46
        174 |          3        0.00        0.46
        175 |          1        0.00        0.46
        178 |         30        0.01        0.46
        180 |         49        0.01        0.48
        188 |          3        0.00        0.48
        191 |        159        0.04        0.51
        192 |         25        0.01        0.52
        196 |          3        0.00        0.52
        203 |         79        0.02        0.54
        204 |          5        0.00        0.54
        208 |         76        0.02        0.56
        212 |          1        0.00        0.56
        214 |         32        0.01        0.57
        218 |         61        0.01        0.58
        222 |          5        0.00        0.58
        226 |          8        0.00        0.58
        231 |         91        0.02        0.61
        232 |         17        0.00        0.61
        233 |         59        0.01        0.62
        234 |          9        0.00        0.63
        246 |        103        0.02        0.65
        250 |        338        0.08        0.73
        254 |          1        0.00        0.73
        258 |          1        0.00        0.73
        262 |          2        0.00        0.73
        266 |          3        0.00        0.73
        268 |         92        0.02        0.75
        270 |          7        0.00        0.76
        275 |         11        0.00        0.76
        276 |        603        0.14        0.90
        288 |         20        0.00        0.90
        300 |         73        0.02        0.92
        304 |          2        0.00        0.92
        308 |          2        0.00        0.92
        312 |          1        0.00        0.92
        320 |          4        0.00        0.92
        324 |         13        0.00        0.93
        328 |          4        0.00        0.93
        332 |          1        0.00        0.93
        340 |          6        0.00        0.93
        344 |          6        0.00        0.93
        348 |         83        0.02        0.95
        352 |         15        0.00        0.95
        356 |        234        0.06        1.01
        360 |         55        0.01        1.02
        364 |        154        0.04        1.06
        368 |        199        0.05        1.11
        372 |         70        0.02        1.12
        376 |          8        0.00        1.12
        380 |        265        0.06        1.19
        384 |         21        0.00        1.19
        388 |         20        0.00        1.20
        392 |         21        0.00        1.20
        398 |        176        0.04        1.24
        400 |          6        0.00        1.25
        404 |         23        0.01        1.25
        408 |          2        0.00        1.25
        410 |         28        0.01        1.26
        414 |          5        0.00        1.26
        417 |         23        0.01        1.26
        418 |          4        0.00        1.27
        422 |         37        0.01        1.27
        426 |          1        0.00        1.27
        428 |         80        0.02        1.29
        430 |          1        0.00        1.29
        434 |         42        0.01        1.30
        438 |          1        0.00        1.30
        440 |        108        0.03        1.33
        442 |          8        0.00        1.33
        450 |         12        0.00        1.33
        454 |          1        0.00        1.33
        458 |         17        0.00        1.34
        466 |          5        0.00        1.34
        470 |          2        0.00        1.34
        474 |          4        0.00        1.34
        478 |          2        0.00        1.34
        480 |          9        0.00        1.34
        484 |         28        0.01        1.35
        496 |          4        0.00        1.35
        498 |         64        0.02        1.37
        499 |          9        0.00        1.37
        504 |        554        0.13        1.50
        508 |         34        0.01        1.51
        524 |         14        0.00        1.51
        528 |        145        0.03        1.54
        533 |          6        0.00        1.55
        540 |          1        0.00        1.55
        554 |         11        0.00        1.55
        558 |          3        0.00        1.55
        562 |          5        0.00        1.55
        566 |         63        0.01        1.57
        578 |         41        0.01        1.58
        586 |        108        0.03        1.60
        591 |          2        0.00        1.60
        598 |          1        0.00        1.60
        600 |         12        0.00        1.60
        604 |         55        0.01        1.62
        608 |         66        0.02        1.63
        616 |        683        0.16        1.79
        620 |        194        0.05        1.84
        624 |         11        0.00        1.84
        626 |          2        0.00        1.84
        630 |          2        0.00        1.84
        638 |          3        0.00        1.84
        642 |        495        0.12        1.96
        646 |         13        0.00        1.96
        662 |          1        0.00        1.97
        678 |          8        0.00        1.97
        682 |          4        0.00        1.97
        686 |         30        0.01        1.98
        690 |          1        0.00        1.98
        694 |          6        0.00        1.98
        702 |          5        0.00        1.98
        703 |        119        0.03        2.01
        704 |         46        0.01        2.02
        705 |         25        0.01        2.02
        706 |         56        0.01        2.04
        710 |         71        0.02        2.05
        716 |         23        0.01        2.06
        724 |         99        0.02        2.08
        736 |          8        0.00        2.08
        740 |         55        0.01        2.10
        748 |          1        0.00        2.10
        752 |        134        0.03        2.13
        756 |         54        0.01        2.14
        760 |         69        0.02        2.16
        762 |         25        0.01        2.16
        764 |         50        0.01        2.18
        768 |          4        0.00        2.18
        780 |          2        0.00        2.18
        784 |          2        0.00        2.18
        788 |        123        0.03        2.21
        792 |        320        0.08        2.28
        795 |         11        0.00        2.28
        800 |         10        0.00        2.29
        804 |        549        0.13        2.42
        807 |         65        0.02        2.43
        810 |      1,494        0.35        2.79
        818 |         65        0.02        2.80
        826 |        564        0.13        2.93
        834 |          9        0.00        2.94
        840 |        205        0.05        2.98
        854 |          6        0.00        2.99
        858 |         19        0.00        2.99
        860 |         91        0.02        3.01
        862 |         46        0.01        3.02
        887 |         52        0.01        3.04
        890 |        133        0.03        3.07
        894 |          8        0.00        3.07
          . |    410,006       96.93      100.00
------------+-----------------------------------
      Total |    422,985      100.00

. 
. /*
> Controlling whether the country names were converted adequately (using "tab cntbrthc" and "tab cntbrthc_ISO3N"), we noticed that the new variable (wi
> th the character values having been transformed to numerical values) has totally 149 data points less than the original variable. Searching for the t
> ransformation issues for these 149 cases we were unable to detect them. As the funtion "kountry" seems to have worked very well in the above case (on
> ly not functioning for countries that don't exist anymore), we suspect the issue to have arisen due to country codes of countries that don't official
> ly exist (anymore). We could anyway not include these countries into the analysis because of missing GDP data.
> 
> Furthermore, we noticed that the values for the United Arab Erimates ("AE") were successfully transformed to "784" - it was not unsuccessful as it wa
> s suggested by the above code.
> */
. 
. 
. 
. * 2.3: combining the three variables (in "iso3n" format) into one variable:
. *****************************************************************************
. 
. generate cntbrth_allwaves_ISO3N= .
(422,985 missing values generated)

. replace cntbrth_allwaves_ISO3N = cntbrtha_ISO3N if cntbrtha_ISO3N != .
(10,658 real changes made)

. replace cntbrth_allwaves_ISO3N = cntbrthb_ISO3N if cntbrthb_ISO3N != .
(9,594 real changes made)

. replace cntbrth_allwaves_ISO3N = cntbrthc_ISO3N if cntbrthc_ISO3N != .
(12,979 real changes made)

. tab cntbrth_allwaves_ISO3N, m // All values for countries of birth - different to the one where the participants were interviewed in - were combined 
> adequately in the new variable "cntbrth_allwaves".

cntbrth_all |
waves_ISO3N |      Freq.     Percent        Cum.
------------+-----------------------------------
          4 |        102        0.02        0.02
          8 |        430        0.10        0.13
         12 |        365        0.09        0.21
         16 |          1        0.00        0.21
         24 |        258        0.06        0.27
         28 |          2        0.00        0.27
         31 |        124        0.03        0.30
         32 |        210        0.05        0.35
         36 |        122        0.03        0.38
         40 |        277        0.07        0.45
         50 |         50        0.01        0.46
         51 |        108        0.03        0.48
         56 |        278        0.07        0.55
         60 |          1        0.00        0.55
         68 |         66        0.02        0.57
         70 |        896        0.21        0.78
         72 |          1        0.00        0.78
         76 |        412        0.10        0.88
         84 |          1        0.00        0.88
         90 |          1        0.00        0.88
         96 |          6        0.00        0.88
        100 |        258        0.06        0.94
        104 |          1        0.00        0.94
        108 |         17        0.00        0.94
        112 |        550        0.13        1.07
        116 |         11        0.00        1.08
        120 |         43        0.01        1.09
        124 |        136        0.03        1.12
        132 |        128        0.03        1.15
        140 |         10        0.00        1.15
        144 |        118        0.03        1.18
        148 |          8        0.00        1.18
        152 |        115        0.03        1.21
        156 |        153        0.04        1.24
        158 |          3        0.00        1.24
        170 |        151        0.04        1.28
        174 |          8        0.00        1.28
        175 |          2        0.00        1.28
        178 |        116        0.03        1.31
        180 |         84        0.02        1.33
        188 |          5        0.00        1.33
        191 |        436        0.10        1.43
        192 |         50        0.01        1.45
        196 |         27        0.01        1.45
        203 |        326        0.08        1.53
        204 |          7        0.00        1.53
        208 |        199        0.05        1.58
        212 |          2        0.00        1.58
        214 |         53        0.01        1.59
        218 |        154        0.04        1.63
        222 |         10        0.00        1.63
        226 |          8        0.00        1.63
        231 |        176        0.04        1.67
        232 |         33        0.01        1.68
        233 |        116        0.03        1.71
        234 |         22        0.01        1.71
        246 |        353        0.08        1.80
        250 |      1,004        0.24        2.03
        254 |          2        0.00        2.03
        258 |          2        0.00        2.04
        262 |          4        0.00        2.04
        266 |          7        0.00        2.04
        268 |        231        0.05        2.09
        270 |         17        0.00        2.10
        275 |         16        0.00        2.10
        276 |      1,792        0.42        2.52
        288 |         60        0.01        2.54
        292 |          2        0.00        2.54
        300 |        190        0.04        2.58
        304 |         18        0.00        2.59
        308 |          3        0.00        2.59
        312 |          5        0.00        2.59
        320 |         13        0.00        2.59
        324 |         41        0.01        2.60
        328 |         11        0.00        2.60
        332 |          5        0.00        2.61
        340 |         10        0.00        2.61
        344 |         25        0.01        2.61
        348 |        246        0.06        2.67
        352 |         40        0.01        2.68
        356 |        470        0.11        2.79
        360 |        168        0.04        2.83
        364 |        366        0.09        2.92
        368 |        434        0.10        3.02
        372 |        177        0.04        3.06
        376 |         25        0.01        3.07
        380 |        872        0.21        3.28
        384 |         38        0.01        3.28
        388 |         66        0.02        3.30
        392 |         46        0.01        3.31
        398 |        441        0.10        3.42
        400 |         17        0.00        3.42
        404 |         65        0.02        3.43
        408 |         10        0.00        3.44
        410 |         67        0.02        3.45
        414 |         18        0.00        3.46
        417 |         67        0.02        3.47
        418 |          9        0.00        3.48
        422 |        122        0.03        3.50
        426 |          1        0.00        3.50
        428 |        164        0.04        3.54
        430 |          5        0.00        3.54
        434 |         95        0.02        3.57
        438 |          7        0.00        3.57
        440 |        219        0.05        3.62
        442 |         21        0.00        3.63
        446 |          7        0.00        3.63
        450 |         28        0.01        3.63
        454 |          2        0.00        3.63
        458 |         37        0.01        3.64
        462 |          5        0.00        3.64
        466 |         12        0.00        3.65
        470 |         13        0.00        3.65
        474 |         13        0.00        3.65
        478 |          5        0.00        3.65
        480 |         38        0.01        3.66
        484 |         45        0.01        3.67
        492 |          3        0.00        3.67
        496 |          7        0.00        3.68
        498 |        152        0.04        3.71
        499 |         15        0.00        3.72
        500 |          1        0.00        3.72
        504 |      1,196        0.28        4.00
        508 |         86        0.02        4.02
        516 |          1        0.00        4.02
        524 |         20        0.00        4.02
        528 |        386        0.09        4.12
        530 |         41        0.01        4.12
        533 |         14        0.00        4.13
        540 |          1        0.00        4.13
        554 |         28        0.01        4.13
        558 |          6        0.00        4.14
        562 |          6        0.00        4.14
        566 |        164        0.04        4.18
        578 |        120        0.03        4.20
        586 |        254        0.06        4.26
        591 |          8        0.00        4.27
        598 |          2        0.00        4.27
        600 |         23        0.01        4.27
        604 |        111        0.03        4.30
        608 |        174        0.04        4.34
        616 |      1,410        0.33        4.67
        620 |        695        0.16        4.84
        624 |         20        0.00        4.84
        626 |          4        0.00        4.84
        630 |          3        0.00        4.84
        638 |         15        0.00        4.85
        642 |      1,055        0.25        5.10
        646 |         36        0.01        5.11
        659 |          2        0.00        5.11
        662 |          4        0.00        5.11
        674 |          2        0.00        5.11
        678 |         18        0.00        5.11
        682 |          9        0.00        5.11
        686 |         60        0.01        5.13
        690 |          2        0.00        5.13
        694 |         12        0.00        5.13
        702 |         20        0.00        5.14
        703 |        329        0.08        5.21
        704 |        115        0.03        5.24
        705 |         77        0.02        5.26
        706 |        103        0.02        5.28
        710 |        177        0.04        5.33
        716 |         54        0.01        5.34
        724 |        287        0.07        5.41
        736 |         24        0.01        5.41
        740 |        140        0.03        5.44
        748 |          4        0.00        5.45
        752 |        344        0.08        5.53
        756 |        134        0.03        5.56
        760 |        148        0.03        5.59
        762 |         61        0.01        5.61
        764 |         98        0.02        5.63
        768 |         18        0.00        5.64
        780 |          8        0.00        5.64
        784 |          4        0.00        5.64
        788 |        260        0.06        5.70
        792 |        883        0.21        5.91
        795 |         25        0.01        5.91
        800 |         37        0.01        5.92
        804 |      1,226        0.29        6.21
        807 |        145        0.03        6.25
        810 |      3,989        0.94        7.19
        818 |        152        0.04        7.23
        826 |      1,419        0.34        7.56
        834 |         17        0.00        7.57
        840 |        493        0.12        7.68
        854 |          8        0.00        7.68
        858 |         47        0.01        7.70
        860 |        231        0.05        7.75
        862 |         84        0.02        7.77
        887 |        117        0.03        7.80
        890 |        229        0.05        7.85
        894 |         19        0.00        7.86
          . |    389,754       92.14      100.00
------------+-----------------------------------
      Total |    422,985      100.00

. 
. 
. * 2.4: recoding country variable from numerical into character values
. *********************************************************************
. 
. * Here, we recode the values of the new country variable into character values of "ISO 3166-1 alpha-3" (as they are used in the World Bank data):
. 
. drop NAMES_STD

. drop MARKER

. kountry cntbrth_allwaves_ISO3N, from(iso3n) to(iso3c) marker

--------------------------------------------
You are converting from iso3n to iso3c....
--------------------------------------------

--------------------------------------------------------------
The command has finished.
The new variables are named NAMES_STD, MARKER, and _ISO3C_.
--------------------------------------------------------------

. tab _ISO3C_ MARKER

  ISO 3166 |
   alpha-3 |        MARKER
      code |         0          1 |     Total
-----------+----------------------+----------
       ABW |         0         14 |        14 
       AFG |         0        102 |       102 
       AGO |         0        258 |       258 
       ALB |         0        430 |       430 
       ANT |         0         41 |        41 
       ARE |         0          4 |         4 
       ARG |         0        210 |       210 
       ARM |         0        108 |       108 
       ASM |         0          1 |         1 
       ATG |         0          2 |         2 
       AUS |         0        122 |       122 
       AUT |         0        277 |       277 
       AZE |         0        124 |       124 
       BDI |         0         17 |        17 
       BEL |         0        278 |       278 
       BEN |         0          7 |         7 
       BFA |         0          8 |         8 
       BGD |         0         50 |        50 
       BGR |         0        258 |       258 
       BIH |         0        896 |       896 
       BLR |         0        550 |       550 
       BLZ |         0          1 |         1 
       BMU |         0          1 |         1 
       BOL |         0         66 |        66 
       BRA |         0        412 |       412 
       BRN |         0          6 |         6 
       BWA |         0          1 |         1 
       CAF |         0         10 |        10 
       CAN |         0        136 |       136 
       CHE |         0        134 |       134 
       CHL |         0        115 |       115 
       CHN |         0        153 |       153 
       CIV |         0         38 |        38 
       CMR |         0         43 |        43 
       COD |         0         84 |        84 
       COG |         0        116 |       116 
       COL |         0        151 |       151 
       COM |         0          8 |         8 
       CPV |         0        128 |       128 
       CRI |         0          5 |         5 
       CUB |         0         50 |        50 
       CYP |         0         27 |        27 
       CZE |         0        326 |       326 
       DEU |         0      1,792 |     1,792 
       DJI |         0          4 |         4 
       DMA |         0          2 |         2 
       DNK |         0        199 |       199 
       DOM |         0         53 |        53 
       DZA |         0        365 |       365 
       ECU |         0        154 |       154 
       EGY |         0        152 |       152 
       ERI |         0         33 |        33 
       ESP |         0        287 |       287 
       EST |         0        116 |       116 
       ETH |         0        176 |       176 
       FIN |         0        353 |       353 
       FRA |         0      1,004 |     1,004 
       FRO |         0         22 |        22 
       GAB |         0          7 |         7 
       GBR |         0      1,419 |     1,419 
       GEO |         0        231 |       231 
       GHA |         0         60 |        60 
       GIB |         0          2 |         2 
       GIN |         0         41 |        41 
       GLP |         0          5 |         5 
       GMB |         0         17 |        17 
       GNB |         0         20 |        20 
       GNQ |         0          8 |         8 
       GRC |         0        190 |       190 
       GRD |         0          3 |         3 
       GRL |         0         18 |        18 
       GTM |         0         13 |        13 
       GUF |         0          2 |         2 
       GUY |         0         11 |        11 
       HKG |         0         25 |        25 
       HND |         0         10 |        10 
       HRV |         0        436 |       436 
       HTI |         0          5 |         5 
       HUN |         0        246 |       246 
       IDN |         0        168 |       168 
       IND |         0        470 |       470 
       IRL |         0        177 |       177 
       IRN |         0        366 |       366 
       IRQ |         0        434 |       434 
       ISL |         0         40 |        40 
       ISR |         0         25 |        25 
       ITA |         0        872 |       872 
       JAM |         0         66 |        66 
       JOR |         0         17 |        17 
       JPN |         0         46 |        46 
       KAZ |         0        441 |       441 
       KEN |         0         65 |        65 
       KGZ |         0         67 |        67 
       KHM |         0         11 |        11 
       KNA |         0          2 |         2 
       KOR |         0         67 |        67 
       KWT |         0         18 |        18 
       LAO |         0          9 |         9 
       LBN |         0        122 |       122 
       LBR |         0          5 |         5 
       LBY |         0         95 |        95 
       LCA |         0          4 |         4 
       LIE |         0          7 |         7 
       LKA |         0        118 |       118 
       LSO |         0          1 |         1 
       LTU |         0        219 |       219 
       LUX |         0         21 |        21 
       LVA |         0        164 |       164 
       MAC |         0          7 |         7 
       MAR |         0      1,196 |     1,196 
       MCO |         0          3 |         3 
       MDA |         0        152 |       152 
       MDG |         0         28 |        28 
       MDV |         0          5 |         5 
       MEX |         0         45 |        45 
       MKD |         0        145 |       145 
       MLI |         0         12 |        12 
       MLT |         0         13 |        13 
       MMR |         0          1 |         1 
       MNE |         0         15 |        15 
       MNG |         0          7 |         7 
       MOZ |         0         86 |        86 
       MRT |         0          5 |         5 
       MSR |         0          1 |         1 
       MTQ |         0         13 |        13 
       MUS |         0         38 |        38 
       MWI |         0          2 |         2 
       MYS |         0         37 |        37 
       MYT |         0          2 |         2 
       NAM |         0          1 |         1 
       NCL |         0          1 |         1 
       NER |         0          6 |         6 
       NGA |         0        164 |       164 
       NIC |         0          6 |         6 
       NLD |         0        386 |       386 
       NOR |         0        120 |       120 
       NPL |         0         20 |        20 
       NZL |         0         28 |        28 
       PAK |         0        254 |       254 
       PAN |         0          8 |         8 
       PER |         0        111 |       111 
       PHL |         0        174 |       174 
       PNG |         0          2 |         2 
       POL |         0      1,410 |     1,410 
       PRI |         0          3 |         3 
       PRK |         0         10 |        10 
       PRT |         0        695 |       695 
       PRY |         0         23 |        23 
       PSE |         0         16 |        16 
       PYF |         0          2 |         2 
       REU |         0         15 |        15 
       ROU |         0      1,055 |     1,055 
       RUS |         0      3,989 |     3,989 
       RWA |         0         36 |        36 
       SAU |         0          9 |         9 
       SDN |         0         24 |        24 
       SEN |         0         60 |        60 
       SGP |         0         20 |        20 
       SLB |         0          1 |         1 
       SLE |         0         12 |        12 
       SLV |         0         10 |        10 
       SMR |         0          2 |         2 
       SOM |         0        103 |       103 
       SRB |         0        229 |       229 
       STP |         0         18 |        18 
       SUR |         0        140 |       140 
       SVK |         0        329 |       329 
       SVN |         0         77 |        77 
       SWE |         0        344 |       344 
       SWZ |         0          4 |         4 
       SYC |         0          2 |         2 
       SYR |         0        148 |       148 
       TCD |         0          8 |         8 
       TGO |         0         18 |        18 
       THA |         0         98 |        98 
       TJK |         0         61 |        61 
       TKM |         0         25 |        25 
       TLS |         0          4 |         4 
       TTO |         0          8 |         8 
       TUN |         0        260 |       260 
       TUR |         0        883 |       883 
       TWN |         3          0 |         3 
       TZA |         0         17 |        17 
       UGA |         0         37 |        37 
       UKR |         0      1,226 |     1,226 
       URY |         0         47 |        47 
       USA |         0        493 |       493 
       UZB |         0        231 |       231 
       VEN |         0         84 |        84 
       VNM |         0        115 |       115 
       YEM |         0        117 |       117 
       ZAF |         0        177 |       177 
       ZMB |         0         19 |        19 
       ZWE |         0         54 |        54 
-----------+----------------------+----------
     Total |         3     33,228 |    33,231 

. tab cntbrth_allwaves_ISO3N

cntbrth_all |
waves_ISO3N |      Freq.     Percent        Cum.
------------+-----------------------------------
          4 |        102        0.31        0.31
          8 |        430        1.29        1.60
         12 |        365        1.10        2.70
         16 |          1        0.00        2.70
         24 |        258        0.78        3.48
         28 |          2        0.01        3.48
         31 |        124        0.37        3.86
         32 |        210        0.63        4.49
         36 |        122        0.37        4.86
         40 |        277        0.83        5.69
         50 |         50        0.15        5.84
         51 |        108        0.32        6.17
         56 |        278        0.84        7.00
         60 |          1        0.00        7.01
         68 |         66        0.20        7.20
         70 |        896        2.70        9.90
         72 |          1        0.00        9.90
         76 |        412        1.24       11.14
         84 |          1        0.00       11.15
         90 |          1        0.00       11.15
         96 |          6        0.02       11.17
        100 |        258        0.78       11.94
        104 |          1        0.00       11.95
        108 |         17        0.05       12.00
        112 |        550        1.66       13.65
        116 |         11        0.03       13.69
        120 |         43        0.13       13.82
        124 |        136        0.41       14.22
        132 |        128        0.39       14.61
        140 |         10        0.03       14.64
        144 |        118        0.36       15.00
        148 |          8        0.02       15.02
        152 |        115        0.35       15.37
        156 |        153        0.46       15.83
        158 |          3        0.01       15.83
        170 |        151        0.45       16.29
        174 |          8        0.02       16.31
        175 |          2        0.01       16.32
        178 |        116        0.35       16.67
        180 |         84        0.25       16.92
        188 |          5        0.02       16.94
        191 |        436        1.31       18.25
        192 |         50        0.15       18.40
        196 |         27        0.08       18.48
        203 |        326        0.98       19.46
        204 |          7        0.02       19.48
        208 |        199        0.60       20.08
        212 |          2        0.01       20.09
        214 |         53        0.16       20.25
        218 |        154        0.46       20.71
        222 |         10        0.03       20.74
        226 |          8        0.02       20.76
        231 |        176        0.53       21.29
        232 |         33        0.10       21.39
        233 |        116        0.35       21.74
        234 |         22        0.07       21.81
        246 |        353        1.06       22.87
        250 |      1,004        3.02       25.89
        254 |          2        0.01       25.90
        258 |          2        0.01       25.90
        262 |          4        0.01       25.92
        266 |          7        0.02       25.94
        268 |        231        0.70       26.63
        270 |         17        0.05       26.68
        275 |         16        0.05       26.73
        276 |      1,792        5.39       32.12
        288 |         60        0.18       32.30
        292 |          2        0.01       32.31
        300 |        190        0.57       32.88
        304 |         18        0.05       32.94
        308 |          3        0.01       32.95
        312 |          5        0.02       32.96
        320 |         13        0.04       33.00
        324 |         41        0.12       33.12
        328 |         11        0.03       33.16
        332 |          5        0.02       33.17
        340 |         10        0.03       33.20
        344 |         25        0.08       33.28
        348 |        246        0.74       34.02
        352 |         40        0.12       34.14
        356 |        470        1.41       35.55
        360 |        168        0.51       36.06
        364 |        366        1.10       37.16
        368 |        434        1.31       38.46
        372 |        177        0.53       39.00
        376 |         25        0.08       39.07
        380 |        872        2.62       41.70
        384 |         38        0.11       41.81
        388 |         66        0.20       42.01
        392 |         46        0.14       42.15
        398 |        441        1.33       43.47
        400 |         17        0.05       43.53
        404 |         65        0.20       43.72
        408 |         10        0.03       43.75
        410 |         67        0.20       43.95
        414 |         18        0.05       44.01
        417 |         67        0.20       44.21
        418 |          9        0.03       44.24
        422 |        122        0.37       44.60
        426 |          1        0.00       44.61
        428 |        164        0.49       45.10
        430 |          5        0.02       45.11
        434 |         95        0.29       45.40
        438 |          7        0.02       45.42
        440 |        219        0.66       46.08
        442 |         21        0.06       46.14
        446 |          7        0.02       46.16
        450 |         28        0.08       46.25
        454 |          2        0.01       46.26
        458 |         37        0.11       46.37
        462 |          5        0.02       46.38
        466 |         12        0.04       46.42
        470 |         13        0.04       46.46
        474 |         13        0.04       46.50
        478 |          5        0.02       46.51
        480 |         38        0.11       46.63
        484 |         45        0.14       46.76
        492 |          3        0.01       46.77
        496 |          7        0.02       46.79
        498 |        152        0.46       47.25
        499 |         15        0.05       47.29
        500 |          1        0.00       47.30
        504 |      1,196        3.60       50.90
        508 |         86        0.26       51.15
        516 |          1        0.00       51.16
        524 |         20        0.06       51.22
        528 |        386        1.16       52.38
        530 |         41        0.12       52.50
        533 |         14        0.04       52.54
        540 |          1        0.00       52.55
        554 |         28        0.08       52.63
        558 |          6        0.02       52.65
        562 |          6        0.02       52.67
        566 |        164        0.49       53.16
        578 |        120        0.36       53.52
        586 |        254        0.76       54.29
        591 |          8        0.02       54.31
        598 |          2        0.01       54.32
        600 |         23        0.07       54.39
        604 |        111        0.33       54.72
        608 |        174        0.52       55.24
        616 |      1,410        4.24       59.49
        620 |        695        2.09       61.58
        624 |         20        0.06       61.64
        626 |          4        0.01       61.65
        630 |          3        0.01       61.66
        638 |         15        0.05       61.70
        642 |      1,055        3.17       64.88
        646 |         36        0.11       64.99
        659 |          2        0.01       64.99
        662 |          4        0.01       65.01
        674 |          2        0.01       65.01
        678 |         18        0.05       65.07
        682 |          9        0.03       65.09
        686 |         60        0.18       65.27
        690 |          2        0.01       65.28
        694 |         12        0.04       65.32
        702 |         20        0.06       65.38
        703 |        329        0.99       66.37
        704 |        115        0.35       66.71
        705 |         77        0.23       66.94
        706 |        103        0.31       67.25
        710 |        177        0.53       67.79
        716 |         54        0.16       67.95
        724 |        287        0.86       68.81
        736 |         24        0.07       68.88
        740 |        140        0.42       69.31
        748 |          4        0.01       69.32
        752 |        344        1.04       70.35
        756 |        134        0.40       70.76
        760 |        148        0.45       71.20
        762 |         61        0.18       71.39
        764 |         98        0.29       71.68
        768 |         18        0.05       71.73
        780 |          8        0.02       71.76
        784 |          4        0.01       71.77
        788 |        260        0.78       72.55
        792 |        883        2.66       75.21
        795 |         25        0.08       75.29
        800 |         37        0.11       75.40
        804 |      1,226        3.69       79.09
        807 |        145        0.44       79.52
        810 |      3,989       12.00       91.53
        818 |        152        0.46       91.98
        826 |      1,419        4.27       96.25
        834 |         17        0.05       96.30
        840 |        493        1.48       97.79
        854 |          8        0.02       97.81
        858 |         47        0.14       97.95
        860 |        231        0.70       98.65
        862 |         84        0.25       98.90
        887 |        117        0.35       99.25
        890 |        229        0.69       99.94
        894 |         19        0.06      100.00
------------+-----------------------------------
      Total |     33,231      100.00

. rename _ISO3C_ cntbrth_allwaves

. tab cntbrth_allwaves, m

   ISO 3166 |
    alpha-3 |
       code |      Freq.     Percent        Cum.
------------+-----------------------------------
            |    389,754       92.14       92.14
        ABW |         14        0.00       92.15
        AFG |        102        0.02       92.17
        AGO |        258        0.06       92.23
        ALB |        430        0.10       92.33
        ANT |         41        0.01       92.34
        ARE |          4        0.00       92.34
        ARG |        210        0.05       92.39
        ARM |        108        0.03       92.42
        ASM |          1        0.00       92.42
        ATG |          2        0.00       92.42
        AUS |        122        0.03       92.45
        AUT |        277        0.07       92.51
        AZE |        124        0.03       92.54
        BDI |         17        0.00       92.55
        BEL |        278        0.07       92.61
        BEN |          7        0.00       92.62
        BFA |          8        0.00       92.62
        BGD |         50        0.01       92.63
        BGR |        258        0.06       92.69
        BIH |        896        0.21       92.90
        BLR |        550        0.13       93.03
        BLZ |          1        0.00       93.03
        BMU |          1        0.00       93.03
        BOL |         66        0.02       93.05
        BRA |        412        0.10       93.15
        BRN |          6        0.00       93.15
        BWA |          1        0.00       93.15
        CAF |         10        0.00       93.15
        CAN |        136        0.03       93.18
        CHE |        134        0.03       93.21
        CHL |        115        0.03       93.24
        CHN |        153        0.04       93.28
        CIV |         38        0.01       93.29
        CMR |         43        0.01       93.30
        COD |         84        0.02       93.32
        COG |        116        0.03       93.34
        COL |        151        0.04       93.38
        COM |          8        0.00       93.38
        CPV |        128        0.03       93.41
        CRI |          5        0.00       93.41
        CUB |         50        0.01       93.42
        CYP |         27        0.01       93.43
        CZE |        326        0.08       93.51
        DEU |      1,792        0.42       93.93
        DJI |          4        0.00       93.93
        DMA |          2        0.00       93.93
        DNK |        199        0.05       93.98
        DOM |         53        0.01       93.99
        DZA |        365        0.09       94.08
        ECU |        154        0.04       94.11
        EGY |        152        0.04       94.15
        ERI |         33        0.01       94.16
        ESP |        287        0.07       94.23
        EST |        116        0.03       94.25
        ETH |        176        0.04       94.30
        FIN |        353        0.08       94.38
        FRA |      1,004        0.24       94.62
        FRO |         22        0.01       94.62
        GAB |          7        0.00       94.62
        GBR |      1,419        0.34       94.96
        GEO |        231        0.05       95.01
        GHA |         60        0.01       95.03
        GIB |          2        0.00       95.03
        GIN |         41        0.01       95.04
        GLP |          5        0.00       95.04
        GMB |         17        0.00       95.04
        GNB |         20        0.00       95.05
        GNQ |          8        0.00       95.05
        GRC |        190        0.04       95.09
        GRD |          3        0.00       95.09
        GRL |         18        0.00       95.10
        GTM |         13        0.00       95.10
        GUF |          2        0.00       95.10
        GUY |         11        0.00       95.11
        HKG |         25        0.01       95.11
        HND |         10        0.00       95.11
        HRV |        436        0.10       95.22
        HTI |          5        0.00       95.22
        HUN |        246        0.06       95.28
        IDN |        168        0.04       95.32
        IND |        470        0.11       95.43
        IRL |        177        0.04       95.47
        IRN |        366        0.09       95.56
        IRQ |        434        0.10       95.66
        ISL |         40        0.01       95.67
        ISR |         25        0.01       95.67
        ITA |        872        0.21       95.88
        JAM |         66        0.02       95.89
        JOR |         17        0.00       95.90
        JPN |         46        0.01       95.91
        KAZ |        441        0.10       96.01
        KEN |         65        0.02       96.03
        KGZ |         67        0.02       96.05
        KHM |         11        0.00       96.05
        KNA |          2        0.00       96.05
        KOR |         67        0.02       96.06
        KWT |         18        0.00       96.07
        LAO |          9        0.00       96.07
        LBN |        122        0.03       96.10
        LBR |          5        0.00       96.10
        LBY |         95        0.02       96.12
        LCA |          4        0.00       96.12
        LIE |          7        0.00       96.13
        LKA |        118        0.03       96.15
        LSO |          1        0.00       96.15
        LTU |        219        0.05       96.21
        LUX |         21        0.00       96.21
        LVA |        164        0.04       96.25
        MAC |          7        0.00       96.25
        MAR |      1,196        0.28       96.53
        MCO |          3        0.00       96.53
        MDA |        152        0.04       96.57
        MDG |         28        0.01       96.58
        MDV |          5        0.00       96.58
        MEX |         45        0.01       96.59
        MKD |        145        0.03       96.62
        MLI |         12        0.00       96.63
        MLT |         13        0.00       96.63
        MMR |          1        0.00       96.63
        MNE |         15        0.00       96.63
        MNG |          7        0.00       96.63
        MOZ |         86        0.02       96.65
        MRT |          5        0.00       96.66
        MSR |          1        0.00       96.66
        MTQ |         13        0.00       96.66
        MUS |         38        0.01       96.67
        MWI |          2        0.00       96.67
        MYS |         37        0.01       96.68
        MYT |          2        0.00       96.68
        NAM |          1        0.00       96.68
        NCL |          1        0.00       96.68
        NER |          6        0.00       96.68
        NGA |        164        0.04       96.72
        NIC |          6        0.00       96.72
        NLD |        386        0.09       96.81
        NOR |        120        0.03       96.84
        NPL |         20        0.00       96.84
        NZL |         28        0.01       96.85
        PAK |        254        0.06       96.91
        PAN |          8        0.00       96.91
        PER |        111        0.03       96.94
        PHL |        174        0.04       96.98
        PNG |          2        0.00       96.98
        POL |      1,410        0.33       97.31
        PRI |          3        0.00       97.31
        PRK |         10        0.00       97.32
        PRT |        695        0.16       97.48
        PRY |         23        0.01       97.49
        PSE |         16        0.00       97.49
        PYF |          2        0.00       97.49
        REU |         15        0.00       97.49
        ROU |      1,055        0.25       97.74
        RUS |      3,989        0.94       98.69
        RWA |         36        0.01       98.70
        SAU |          9        0.00       98.70
        SDN |         24        0.01       98.70
        SEN |         60        0.01       98.72
        SGP |         20        0.00       98.72
        SLB |          1        0.00       98.72
        SLE |         12        0.00       98.73
        SLV |         10        0.00       98.73
        SMR |          2        0.00       98.73
        SOM |        103        0.02       98.75
        SRB |        229        0.05       98.81
        STP |         18        0.00       98.81
        SUR |        140        0.03       98.84
        SVK |        329        0.08       98.92
        SVN |         77        0.02       98.94
        SWE |        344        0.08       99.02
        SWZ |          4        0.00       99.02
        SYC |          2        0.00       99.02
        SYR |        148        0.03       99.06
        TCD |          8        0.00       99.06
        TGO |         18        0.00       99.06
        THA |         98        0.02       99.09
        TJK |         61        0.01       99.10
        TKM |         25        0.01       99.11
        TLS |          4        0.00       99.11
        TTO |          8        0.00       99.11
        TUN |        260        0.06       99.17
        TUR |        883        0.21       99.38
        TWN |          3        0.00       99.38
        TZA |         17        0.00       99.39
        UGA |         37        0.01       99.39
        UKR |      1,226        0.29       99.68
        URY |         47        0.01       99.70
        USA |        493        0.12       99.81
        UZB |        231        0.05       99.87
        VEN |         84        0.02       99.89
        VNM |        115        0.03       99.91
        YEM |        117        0.03       99.94
        ZAF |        177        0.04       99.98
        ZMB |         19        0.00       99.99
        ZWE |         54        0.01      100.00
------------+-----------------------------------
      Total |    422,985      100.00

. 
. 
. * 2.5: saving adapted dataset
. *****************************
. 
. save "ESSdata_AlmostPreparedForMerge.dta", replace
file ESSdata_AlmostPreparedForMerge.dta saved

. 
. 
. ***********************************************************
. * Step 3: Integrating World Bank data into the ESS dataset:
. ***********************************************************
. 
. /*
> We will integrate GDP/capita of country of birth from 2002-2018 into the ESS dataset.
> We do this by merging two datasets, namely the currently opened ESS dataset as "master dataset"
> and the World Bank dataset, which we will open soon, as "using dataset".
> */
. 
. 
. * 3.1: Opening the World Bank dataset & keeping only useful variables
. *********************************************************************
. import delimited "daten weltbank.csv", delimiter(comma) varnames(1) clear // loading the intended dataset in STATA
(encoding automatically selected: UTF-8)
(25 vars, 271 obs)

. browse

. drop seriescode // We drop variable that we don't need.

. 
. 
. * 3.2: Matching the linking variable's name & sorting the World Bank dataset
. ****************************************************************************
. rename countrycode cntbrth_allwaves // The variable indicating the names of the countries is the linking variable. It is renamed to be called "cntbrt
> ha_allwaves" like in the master dataset.

. sort cntbrth_allwaves // We sort the using dataset based on the linking variable.

. save "worldbankdata_PreparedForMerge.dta", replace
file worldbankdata_PreparedForMerge.dta saved

. 
. 
. * 3.3: Sorting the ESS dataset
. ******************************
. use "ESSdata_AlmostPreparedForMerge.dta", clear

. sort cntbrth_allwaves // We sort the master dataset based on the linking variable.

. save "ESSdata_PreparedForMerge.dta", replace
file ESSdata_PreparedForMerge.dta saved

. 
. 
. * 3.4: Merging the datasets & saving as new dataset
. ***************************************************
. merge m:m cntbrth_allwaves using "worldbankdata_PreparedForMerge.dta" // We merge the datasets indicating the linking variable "cntbrtha_allwaves" an
> d the repartition "m:m". We use "m:m" as our extra-variables (GDP/capita for several countries) have many values (GDP/capita in several years) to be 
> merged with many observations in the master dataset (the same countries of birth appear multiple times in several lines as several participants were 
> born in the same country).

    Result                      Number of obs
    -----------------------------------------
    Not matched                           162
        from master                        82  (_merge==1)
        from using                         80  (_merge==2)

    Matched                           422,903  (_merge==3)
    -----------------------------------------

. 
. browse cntbrtha cntbrth_allwaves yr2000 _merge

. save "ESS_WorldBank_data.dta", replace
file ESS_WorldBank_data.dta saved

. sort _merge

. browse

. 
. /*
> Controlling whether the observations were combined adequately according to the countries of origin, we noticed that 162 observations have not been ma
> tched. Namely, 82 observations from the master dataset (e.g. observations "391854" to "391894") and 80 observations from the using dataset (e.g. obse
> rvations "422986" to "423065"). Searching for the transformation issues we noticed that for several countries some of the GDP/capita data is missing.
>  We cannot include these participants in our data analysis as the GDP data is necessary for it. More specifically, for the following countries (in "I
> SO 3166-1 alpha-3" format) there is no GDP/capita data available at all:
> ANT CHI GLP GUF MSR INX MTQ PYF REU TWN VEN INX MAF VGB
> 
> And for the following countries, there is only GDP data available for a year later than the one of the first wave (2002). The year from which onwards
>  GDP/capita data is available, is indicated in brackets:
> CYM(2006) NRU(2004) SSD (2008) SOM(2013) SXM(2009) TCA(2011) XKX(2008)
> */
. 
. 
. ****************************************
. * Step 4: final preparation of variables
. ****************************************
. 
. 
. * 4.1: independent variable "GDP of immigrants' country of origin"
. ******************************************************************
. 
. * destringing variables: variables for the gdp/capita have been imported in string format. The command destring only works with the option force (wit
> hout force, the error message "yr2002: contains nonnumeric characters, no generate" appears.)
. 
. destring yr2002, generate(gdp2002) force
yr2002: contains nonnumeric characters; gdp2002 generated as double
(390081 missing values generated)

. destring yr2004, generate(gdp2004) force 
yr2004: contains nonnumeric characters; gdp2004 generated as double
(390080 missing values generated)

. destring yr2006, generate(gdp2006) force 
yr2006: contains nonnumeric characters; gdp2006 generated as double
(390079 missing values generated)

. destring yr2008, generate(gdp2008) force 
yr2008: contains nonnumeric characters; gdp2008 generated as double
(390077 missing values generated)

. destring yr2010, generate(gdp2010) force 
yr2010: contains nonnumeric characters; gdp2010 generated as double
(390076 missing values generated)

. destring yr2012, generate(gdp2012) force 
yr2012: contains nonnumeric characters; gdp2012 generated as double
(390108 missing values generated)

. destring yr2014, generate(gdp2014) force 
yr2014: contains nonnumeric characters; gdp2014 generated as double
(390001 missing values generated)

. destring yr2016, generate(gdp2016) force
yr2016: contains nonnumeric characters; gdp2016 generated as double
(390002 missing values generated)

. destring yr2018, generate(gdp2018) force 
yr2018: contains nonnumeric characters; gdp2018 generated as double
(390016 missing values generated)

. 
. 
. * transforming gdp/capita in dollars to gdp/capita in thousand dollars
. gen gdp2002_t = gdp2002/1000
(390,081 missing values generated)

. gen gdp2004_t = gdp2004/1000
(390,080 missing values generated)

. gen gdp2006_t = gdp2006/1000
(390,079 missing values generated)

. gen gdp2008_t = gdp2008/1000
(390,077 missing values generated)

. gen gdp2010_t = gdp2010/1000
(390,076 missing values generated)

. gen gdp2012_t = gdp2012/1000
(390,108 missing values generated)

. gen gdp2014_t = gdp2014/1000
(390,001 missing values generated)

. gen gdp2016_t = gdp2016/1000
(390,002 missing values generated)

. gen gdp2018_t = gdp2018/1000
(390,016 missing values generated)

. 
. 
. * combining gdp/capita data of individual years to a gdp/capita variable with data of all survey waves
. gen gdp_t =.
(423,065 missing values generated)

. replace gdp_t = gdp2002_t if essround == 1
(3,646 real changes made)

. replace gdp_t = gdp2004_t if essround == 2
(3,683 real changes made)

. replace gdp_t = gdp2006_t if essround == 3
(3,221 real changes made)

. replace gdp_t = gdp2008_t if essround == 4
(4,782 real changes made)

. replace gdp_t = gdp2010_t if essround == 5
(4,732 real changes made)

. replace gdp_t = gdp2012_t if essround == 6
(4,617 real changes made)

. replace gdp_t = gdp2014_t if essround == 7
(4,164 real changes made)

. replace gdp_t = gdp2016_t if essround == 8
(4,089 real changes made)

. replace gdp_t = gdp2018_t if essround == 9
(0 real changes made)

. 
. browse gdp_t

. 
. 
. * 4.2: dependent variable: self-perceived discrimination of immigrants
. **********************************************************************
. 
. fre dscrgrp

dscrgrp -- Member of a group discriminated against in this country
-------------------------------------------------------------------
                      |      Freq.    Percent      Valid       Cum.
----------------------+--------------------------------------------
Valid   1  Yes        |      29612       7.00       7.10       7.10
        2  No         |     387727      91.65      92.90     100.00
        Total         |     417339      98.65     100.00           
Missing .             |         80       0.02                      
        .a Refusal    |        355       0.08                      
        .b Don't know |       3549       0.84                      
        .c No answer  |       1742       0.41                      
        Total         |       5726       1.35                      
Total                 |     423065     100.00                      
-------------------------------------------------------------------

. /*
> dscrgrp -- Member of a group discriminated against in this country
> -------------------------------------------------------------------
>                       |      Freq.    Percent      Valid       Cum.
> ----------------------+--------------------------------------------
> Valid   1  Yes        |      29612       7.00       7.10       7.10
>         2  No         |     387727      91.65      92.90     100.00
>         Total         |     417339      98.65     100.00           
> Missing .             |         80       0.02                      
>         .a Refusal    |        355       0.08                      
>         .b Don't know |       3549       0.84                      
>         .c No answer  |       1742       0.41                      
>         Total         |       5726       1.35                      
> Total                 |     423065     100.00                      
> -------------------------------------------------------------------
> */
. 
. /*
> Generating a new dummy variable with (0 = not beeing discriminated) (1 = beeing discriminated):
> 
> One important restriction we made in our dependent variable is that we only wanted to take into account (as value "1" in the dependent dummy variable
> ) people that feel
> discriminated based on a trait that might be related to their country of origin. Therefore, we made sure to only include as value "1"
> people who selected at least one of the following as reason for their self-perceived discrimination. Consequently, the
> participants needed to have the value "1" in the corresponding variable:
> 
>         dscrrce: Discrimination of respondent's group: colour or race
>         dscrntn: Discrimination of respondent's group: nationality
>         dscrrlg: Discrimination of respondent's group: religion
>         dscrlng: Discrimination of respondent's group: language
>         dscretn: Discrimination of respondent's group: ethnic group
> 
>         
> Conversely, those people who indicated that they feel discriminated against, but not for reasons that have something to do with being an immigrant, w
> ere recoded to have the value "0" (= not feeling discriminated based on factor related to country of origin). These factors could be one or several o
> nes of the following:
>         
>         dscrage: Discrimination of respondent's group: age
>         dscrgnd: Discrimination of respondent's group: gender
>         dscrsex: Discrimination of respondent's group: sexuality
>         dscrdsb: Discrimination of respondent's group: disability
>         dscroth: Discrimination of respondent's group: other grounds
>         dscrref: Discrimination of respondent's group: refusal
>         dscrna: Discrimination of respondent's group: no answer
>         dscrdk: Discrimination of respondent's group: don't know
>         dscrnap: Discrimination of respondent's group: not applicable
> 
> */
. 
. recode dscrgrp (1=1 "yes") (2=0 "no") (else=.), gen(discriminated)
(393373 differences between dscrgrp and discriminated)

. 
. replace discriminated = 0 if discriminated == 1 & dscrrce != 1 & dscrntn != 1 & dscrrlg != 1 & dscrlng != 1 & dscretn != 1
(15,073 real changes made)

. 
. 
. * specifing by the year of the survey waves (discrimination per year)
. 
. fre essround

essround -- ESS round
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   1 1   |      42359      10.01      10.01      10.01
        2 2   |      47537      11.24      11.24      21.25
        3 3   |      43000      10.16      10.17      31.42
        4 4   |      54606      12.91      12.91      44.33
        5 5   |      52458      12.40      12.40      56.73
        6 6   |      52177      12.33      12.34      69.07
        7 7   |      40185       9.50       9.50      78.57
        8 8   |      44387      10.49      10.49      89.06
        9 9   |      46276      10.94      10.94     100.00
        Total |     422985      99.98     100.00           
Missing .     |         80       0.02                      
Total         |     423065     100.00                      
-----------------------------------------------------------

. gen discriminated2002 = discriminated if essround == 1
(381,111 missing values generated)

. gen discriminated2004 = discriminated if essround == 2
(377,374 missing values generated)

. gen discriminated2006 = discriminated if essround == 3
(380,589 missing values generated)

. gen discriminated2008 = discriminated if essround == 4
(369,121 missing values generated)

. gen discriminated2010 = discriminated if essround == 5
(371,136 missing values generated)

. gen discriminated2012 = discriminated if essround == 6
(371,490 missing values generated)

. gen discriminated2014 = discriminated if essround == 7
(383,224 missing values generated)

. gen discriminated2016 = discriminated if essround == 8
(379,020 missing values generated)

. gen discriminated2018 = discriminated if essround == 9
(377,181 missing values generated)

. 
. 
. 
. * 4.3 control variables
. ***********************
. 
. /*
> The following variables were intended to be used as control variables.
> 
> rlgdnme: Religion or denomination belonging to in the past
> rlgdgr: How religious are you
> eisced: Highest level of education, ES - ISCED
> imptrad: Important to follow traditions and customs
> hinctnt: Household's total net income, all sources: ESS waves 1-3
> hinctnta: Household's total net income, all sources: from ESS wave 4 onward
> livecntr: How long ago first came to live in country
> */
. 
. 
. * 4.3.1 religion
. ****************
. 
.         fre rlgdnme

rlgdnme -- Religion or denomination belonging to in the past
--------------------------------------------------------------------------------------
                                         |      Freq.    Percent      Valid       Cum.
-----------------------------------------+--------------------------------------------
Valid   1  Roman Catholic                |      20766       4.91      55.80      55.80
        2  Protestant                    |      12965       3.06      34.84      90.64
        3  Eastern Orthodox              |       1261       0.30       3.39      94.03
        4  Other Christian denomination  |       1021       0.24       2.74      96.77
        5  Jewish                        |        154       0.04       0.41      97.19
        6  Islam                         |        434       0.10       1.17      98.35
        7  Eastern religions             |        324       0.08       0.87      99.22
        8  Other Non-Christian religions |        289       0.07       0.78     100.00
        Total                            |      37214       8.80     100.00           
Missing .                                |      13595       3.21                      
        .a Not applicable                |     371216      87.74                      
        .b Refusal                       |        179       0.04                      
        .c No answer                     |        861       0.20                      
        Total                            |     385851      91.20                      
Total                                    |     423065     100.00                      
--------------------------------------------------------------------------------------

.         recode rlgdnme (1=1 "Roman Catholic") (2=2 "Protestant") (3=3 "Eastern Orthodox") (4=4 "Other Christian denomination") (5=5 "Jewish") (6=6 "I
> slam") (7=7 "Eastern religions") (8=8 "Other Non-Christian religions") (else=.), gen(religion)
(372256 differences between rlgdnme and religion)

.         fre religion

religion -- RECODE of rlgdnme (Religion or denomination belonging to in the past)
-------------------------------------------------------------------------------------
                                        |      Freq.    Percent      Valid       Cum.
----------------------------------------+--------------------------------------------
Valid   1 Roman Catholic                |      20766       4.91      55.80      55.80
        2 Protestant                    |      12965       3.06      34.84      90.64
        3 Eastern Orthodox              |       1261       0.30       3.39      94.03
        4 Other Christian denomination  |       1021       0.24       2.74      96.77
        5 Jewish                        |        154       0.04       0.41      97.19
        6 Islam                         |        434       0.10       1.17      98.35
        7 Eastern religions             |        324       0.08       0.87      99.22
        8 Other Non-Christian religions |        289       0.07       0.78     100.00
        Total                           |      37214       8.80     100.00           
Missing .                               |     385851      91.20                      
Total                                   |     423065     100.00                      
-------------------------------------------------------------------------------------

. 
.         recode religion (1/4=0 "christian") (5/8=1 "nonchristian"), gen(nonchristian)
(37214 differences between religion and nonchristian)

.         fre nonchristian

nonchristian -- RECODE of religion (RECODE of rlgdnme (Religion or denomination belonging to in 
--------------------------------------------------------------------
                       |      Freq.    Percent      Valid       Cum.
-----------------------+--------------------------------------------
Valid   0 christian    |      36013       8.51      96.77      96.77
        1 nonchristian |       1201       0.28       3.23     100.00
        Total          |      37214       8.80     100.00           
Missing .              |     385851      91.20                      
Total                  |     423065     100.00                      
--------------------------------------------------------------------

. 
.         fre rlgdgr

rlgdgr -- How religious are you
-----------------------------------------------------------------------------
                                |      Freq.    Percent      Valid       Cum.
--------------------------------+--------------------------------------------
Valid   0  Not at all religious |      62668      14.81      14.95      14.95
        1  1                    |      24215       5.72       5.78      20.73
        2  2                    |      29806       7.05       7.11      27.85
        3  3                    |      33164       7.84       7.91      35.76
        4  4                    |      26983       6.38       6.44      42.20
        5  5                    |      68963      16.30      16.46      58.65
        6  6                    |      40914       9.67       9.76      68.42
        7  7                    |      47503      11.23      11.34      79.75
        8  8                    |      42026       9.93      10.03      89.78
        9  9                    |      18096       4.28       4.32      94.10
        10 Very religious       |      24722       5.84       5.90     100.00
        Total                   |     419060      99.05     100.00           
Missing .                       |         80       0.02                      
        .a Refusal              |        760       0.18                      
        .b Don't know           |       2657       0.63                      
        .c No answer            |        508       0.12                      
        Total                   |       4005       0.95                      
Total                           |     423065     100.00                      
-----------------------------------------------------------------------------

.         gen religiosity = rlgdgr
(4,005 missing values generated)

.         replace religiosity = . if religiosity == .a
(760 real changes made, 760 to missing)

.         replace religiosity = . if religiosity == .b
(2,657 real changes made, 2,657 to missing)

.         replace religiosity = . if religiosity == .c
(508 real changes made, 508 to missing)

.         label define religiosity 1 "Not at all religious" 10 "Very religious"

.         fre religiosity

religiosity
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   0     |      62668      14.81      14.95      14.95
        1     |      24215       5.72       5.78      20.73
        2     |      29806       7.05       7.11      27.85
        3     |      33164       7.84       7.91      35.76
        4     |      26983       6.38       6.44      42.20
        5     |      68963      16.30      16.46      58.65
        6     |      40914       9.67       9.76      68.42
        7     |      47503      11.23      11.34      79.75
        8     |      42026       9.93      10.03      89.78
        9     |      18096       4.28       4.32      94.10
        10    |      24722       5.84       5.90     100.00
        Total |     419060      99.05     100.00           
Missing .     |       4005       0.95                      
Total         |     423065     100.00                      
-----------------------------------------------------------

. 
. /*
> The variable "nonchristian" created above, indicating whether an immigrant has a religion different from christianity that is predominant in European
>  countries, was in the end not included in the regression analysis. Mainly, because this religion variable is low in variation between the participan
> ts. Another reason is that the religion variable has a strong correlation with GDP/capita, which makes it difficult to distinctively assess their res
> pective effects. See:  */
.         regress gdp2002_t i.religion

      Source |       SS           df       MS      Number of obs   =     2,793
-------------+----------------------------------   F(7, 2785)      =     93.86
       Model |  165598.674         7  23656.9535   Prob > F        =    0.0000
    Residual |  701956.065     2,785  252.048856   R-squared       =    0.1909
-------------+----------------------------------   Adj R-squared   =    0.1888
       Total |  867554.739     2,792  310.728775   Root MSE        =    15.876

------------------------------------------------------------------------------------------------
                     gdp2002_t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------------------------+----------------------------------------------------------------
                      religion |
                   Protestant  |   4.782506    .786734     6.08   0.000     3.239865    6.325146
             Eastern Orthodox  |  -16.99893   .9929914   -17.12   0.000      -18.946   -15.05185
 Other Christian denomination  |   .1852485   1.305467     0.14   0.887    -2.374532    2.745029
                       Jewish  |  -11.90314   2.431925    -4.89   0.000     -16.6717   -7.134586
                        Islam  |  -16.99577   1.189699   -14.29   0.000    -19.32855   -14.66299
            Eastern religions  |  -13.92888   1.701787    -8.18   0.000    -17.26577   -10.59199
Other Non-Christian religions  |  -1.606808   2.839437    -0.57   0.572    -7.174422    3.960806
                               |
                         _cons |   23.03956   .4311342    53.44   0.000     22.19419    23.88494
------------------------------------------------------------------------------------------------

.         
. /* The country of origin of non-christian immigrants has in average a -13247.6 lower GDP per capita (in US dollars), ceteris paribus, for the year of
>  the first survey wave in 2002. The effect is highly significant. */
. 
. 
. * 4.3.2 education
. *****************
. 
.         fre eisced

eisced -- Highest level of education, ES - ISCED
--------------------------------------------------------------------------------------------------------
                                                           |      Freq.    Percent      Valid       Cum.
-----------------------------------------------------------+--------------------------------------------
Valid   0  Not possible to harmonise into ES-ISCED         |      73306      17.33      17.38      17.38
        1  ES-ISCED I , less than lower secondary          |      34638       8.19       8.21      25.59
        2  ES-ISCED II, lower secondary                    |      62167      14.69      14.74      40.34
        3  ES-ISCED IIIb, lower tier upper secondary       |      63915      15.11      15.16      55.49
        4  ES-ISCED IIIa, upper tier upper secondary       |      71437      16.89      16.94      72.43
        5  ES-ISCED IV, advanced vocational, sub-degree    |      41041       9.70       9.73      82.16
        6  ES-ISCED V1, lower tertiary education, BA level |      34232       8.09       8.12      90.28
        7  ES-ISCED V2, higher tertiary education, >= MA   |      40146       9.49       9.52      99.80
           level                                           |                                            
        55 Other                                           |        859       0.20       0.20     100.00
        Total                                              |     421741      99.69     100.00           
Missing .                                                  |         80       0.02                      
        .a Refusal                                         |        396       0.09                      
        .b Don't know                                      |        436       0.10                      
        .c No answer                                       |        412       0.10                      
        Total                                              |       1324       0.31                      
Total                                                      |     423065     100.00                      
--------------------------------------------------------------------------------------------------------

.         recode eisced (1=1 "less than lower secondary") (2=2 "lower secondary") (3=3 "upper secondary") (4=4 "upper secondary") (5=5 "advanced vocati
> onal") (6=6 "lower tertiary education (BA level)") (7=7 "higher tertiary education (MA level)") (else=.), gen(education)
(75409 differences between eisced and education)

.         fre education

education -- RECODE of eisced (Highest level of education, ES - ISCED)
--------------------------------------------------------------------------------------------
                                               |      Freq.    Percent      Valid       Cum.
-----------------------------------------------+--------------------------------------------
Valid   1 less than lower secondary            |      34638       8.19       9.97       9.97
        2 lower secondary                      |      62167      14.69      17.89      27.85
        3 upper secondary                      |      63915      15.11      18.39      46.24
        4 upper secondary                      |      71437      16.89      20.55      66.79
        5 advanced vocational                  |      41041       9.70      11.81      78.60
        6 lower tertiary education (BA level)  |      34232       8.09       9.85      88.45
        7 higher tertiary education (MA level) |      40146       9.49      11.55     100.00
        Total                                  |     347576      82.16     100.00           
Missing .                                      |      75489      17.84                      
Total                                          |     423065     100.00                      
--------------------------------------------------------------------------------------------

. 
.         
. * 4.3.3 importance of traditions
. ********************************
. 
.         fre imptrad

imptrad -- Important to follow traditions and customs
---------------------------------------------------------------------------
                              |      Freq.    Percent      Valid       Cum.
------------------------------+--------------------------------------------
Valid   1  Very much like me  |      81687      19.31      20.05      20.05
        2  Like me            |     130716      30.90      32.08      52.13
        3  Somewhat like me   |      90281      21.34      22.16      74.29
        4  A little like me   |      54523      12.89      13.38      87.67
        5  Not like me        |      36396       8.60       8.93      96.60
        6  Not like me at all |      13845       3.27       3.40     100.00
        Total                 |     407448      96.31     100.00           
Missing .                     |       6077       1.44                      
        .a Refusal            |       1286       0.30                      
        .b Don't know         |       3764       0.89                      
        .c No answer          |       4490       1.06                      
        Total                 |      15617       3.69                      
Total                         |     423065     100.00                      
---------------------------------------------------------------------------

.         recode imptrad (1=6 "Very much like me") (2=5 "Like me") (3=4 "Somewhat like me") (4=3 "A little like me") (5=2 "Not like me") (6=1 "Not like
>  me at all") (else=.), gen(traditions)
(416988 differences between imptrad and traditions)

.         fre traditions

traditions -- RECODE of imptrad (Important to follow traditions and customs)
--------------------------------------------------------------------------
                             |      Freq.    Percent      Valid       Cum.
-----------------------------+--------------------------------------------
Valid   1 Not like me at all |      13845       3.27       3.40       3.40
        2 Not like me        |      36396       8.60       8.93      12.33
        3 A little like me   |      54523      12.89      13.38      25.71
        4 Somewhat like me   |      90281      21.34      22.16      47.87
        5 Like me            |     130716      30.90      32.08      79.95
        6 Very much like me  |      81687      19.31      20.05     100.00
        Total                |     407448      96.31     100.00           
Missing .                    |      15617       3.69                      
Total                        |     423065     100.00                      
--------------------------------------------------------------------------

. 
.         
. * 4.3.4 household income
. ************************
. 
.         fre hinctnt // net household income variable for survey waves 1-3

hinctnt -- Household's total net income, all sources
-------------------------------------------------------------------
                      |      Freq.    Percent      Valid       Cum.
----------------------+--------------------------------------------
Valid   1  J          |       2819       0.67       3.06       3.06
        2  R          |       4968       1.17       5.39       8.45
        3  C          |       7461       1.76       8.09      16.54
        4  M          |      12996       3.07      14.10      30.64
        5  F          |      12457       2.94      13.51      44.16
        6  S          |      10620       2.51      11.52      55.68
        7  K          |       9305       2.20      10.09      65.77
        8  P          |       8682       2.05       9.42      75.19
        9  D          |      14016       3.31      15.21      90.40
        10 H          |       5866       1.39       6.36      96.76
        11 U          |       1810       0.43       1.96      98.72
        12 N          |       1177       0.28       1.28     100.00
        Total         |      92177      21.79     100.00           
Missing .             |     304460      71.97                      
        .a Refusal    |      14576       3.45                      
        .b Don't know |      10950       2.59                      
        .c No answer  |        902       0.21                      
        Total         |     330888      78.21                      
Total                 |     423065     100.00                      
-------------------------------------------------------------------

.         recode hinctnt (1=900 "<1800") (2=2700 "1800-3600") (3=4800 "3600-6000") (4=9000 "6000-12000") (5=15000 "12000-18000") (6=21000 "18000-24000"
> ) (7=27000 "24000-30000") (8=33000 "30000-36000") (9=48000 "36000-60000") (10=75000 "60000-90000") (11=105000 "90000-120000") (12=200000 ">120000") (
> else=.), gen(income)
(118605 differences between hinctnt and income)

.         fre income

income -- RECODE of hinctnt (Household's total net income, all sources)
-------------------------------------------------------------------------
                            |      Freq.    Percent      Valid       Cum.
----------------------------+--------------------------------------------
Valid   900    <1800        |       2819       0.67       3.06       3.06
        2700   1800-3600    |       4968       1.17       5.39       8.45
        4800   3600-6000    |       7461       1.76       8.09      16.54
        9000   6000-12000   |      12996       3.07      14.10      30.64
        15000  12000-18000  |      12457       2.94      13.51      44.16
        21000  18000-24000  |      10620       2.51      11.52      55.68
        27000  24000-30000  |       9305       2.20      10.09      65.77
        33000  30000-36000  |       8682       2.05       9.42      75.19
        48000  36000-60000  |      14016       3.31      15.21      90.40
        75000  60000-90000  |       5866       1.39       6.36      96.76
        105000 90000-120000 |       1810       0.43       1.96      98.72
        200000 >120000      |       1177       0.28       1.28     100.00
        Total               |      92177      21.79     100.00           
Missing .                   |     330888      78.21                      
Total                       |     423065     100.00                      
-------------------------------------------------------------------------

.         
.         gen income_t = income/1000
(330,888 missing values generated)

.         
.         
. /* From the 4th wave onwards the variable of net household income was measured not using absolutely the same categories over all countries. But rathe
> r ten country-specific deciles were created using net household income data from previous years. The absolute numbers indicating the 10 deciles varie
> d from country to country. As this measure of net household income doesn't correspond to the measure used in the previous survey waves, we won't use 
> the variable net household income in the analysis that takes into account the data of all survey waves. - We will only use it in the analyses that co
> ntain the data of one specific survey wave. */
. 
.         fre hinctnta // net household income variable for survey waves 4 and later

hinctnta -- Household's total net income, all sources
------------------------------------------------------------------------
                           |      Freq.    Percent      Valid       Cum.
---------------------------+--------------------------------------------
Valid   1  J - 1st decile  |      22769       5.38      10.05      10.05
        2  R - 2nd decile  |      26034       6.15      11.49      21.54
        3  C - 3rd decile  |      25711       6.08      11.35      32.88
        4  M - 4th decile  |      25241       5.97      11.14      44.02
        5  F - 5th decile  |      24388       5.76      10.76      54.79
        6  S - 6th decile  |      23087       5.46      10.19      64.97
        7  K - 7th decile  |      22737       5.37      10.03      75.01
        8  P - 8th decile  |      21227       5.02       9.37      84.38
        9  D - 9th decile  |      17700       4.18       7.81      92.19
        10 H - 10th decile |      17704       4.18       7.81     100.00
        Total              |     226598      53.56     100.00           
Missing .                  |     142432      33.67                      
        .a Refusal         |      32613       7.71                      
        .b Don't know      |      20841       4.93                      
        .c No answer       |        581       0.14                      
        Total              |     196467      46.44                      
Total                      |     423065     100.00                      
------------------------------------------------------------------------

.         recode hinctnta (1=1 "1st decile") (2=2 "2nd decile") (3=3 "3rd decile") (4=4 "4th decile") (5=5 "5th decile") (6=6 "6th decile") (7=7 "7th d
> ecile") (8=8 "8th decile") (9=9 "9th decile") (10=10 "10th decile") (else=.), gen(income_a)
(54035 differences between hinctnta and income_a)

.         fre income_a

income_a -- RECODE of hinctnta (Household's total net income, all sources)
--------------------------------------------------------------------
                       |      Freq.    Percent      Valid       Cum.
-----------------------+--------------------------------------------
Valid   1  1st decile  |      22769       5.38      10.05      10.05
        2  2nd decile  |      26034       6.15      11.49      21.54
        3  3rd decile  |      25711       6.08      11.35      32.88
        4  4th decile  |      25241       5.97      11.14      44.02
        5  5th decile  |      24388       5.76      10.76      54.79
        6  6th decile  |      23087       5.46      10.19      64.97
        7  7th decile  |      22737       5.37      10.03      75.01
        8  8th decile  |      21227       5.02       9.37      84.38
        9  9th decile  |      17700       4.18       7.81      92.19
        10 10th decile |      17704       4.18       7.81     100.00
        Total          |     226598      53.56     100.00           
Missing .              |     196467      46.44                      
Total                  |     423065     100.00                      
--------------------------------------------------------------------

. 
.         
. * 4.3.5 Duration of stay
. ************************
. 
.         fre livecntr

livecntr -- How long ago first came to live in country
-------------------------------------------------------------------------------
                                  |      Freq.    Percent      Valid       Cum.
----------------------------------+--------------------------------------------
Valid   1  Within last year       |        235       0.06       1.44       1.44
        2  1-5 years ago          |       1918       0.45      11.74      13.18
        3  6-10 years ago         |       1969       0.47      12.05      25.23
        4  11-20 years ago        |       3455       0.82      21.15      46.38
        5  More than 20 years ago |       8760       2.07      53.62     100.00
        Total                     |      16337       3.86     100.00           
Missing .                         |     235563      55.68                      
        .a Not applicable         |     170744      40.36                      
        .b Refusal                |         15       0.00                      
        .c Don't know             |         77       0.02                      
        .d No answer              |        329       0.08                      
        Total                     |     406728      96.14                      
Total                             |     423065     100.00                      
-------------------------------------------------------------------------------

.         recode livecntr (1=1 " Within last year") (2=2 "1-5 years ago") (3=3 "6-10 years ago") (4=4 "11-20 years ago") (5=5 "More than 20 years ago")
>  (else=.), gen(stayduration)
(171165 differences between livecntr and stayduration)

. 
.         
. * 4.4: variables for supplementary analysis (receiving country perspective)
. ***************************************************************************
. 
. 
. * 4.4.1 education qualification of immigrants - variable "educationqualification"
. *********************************************************************************
. 
. fre qfimedu

qfimedu -- Qualification for immigration: good educational qualifications
------------------------------------------------------------------------------
                                 |      Freq.    Percent      Valid       Cum.
---------------------------------+--------------------------------------------
Valid   0  Extremely unimportant |       4268       1.01       5.27       5.27
        1  1                     |       1648       0.39       2.04       7.31
        2  2                     |       2977       0.70       3.68      10.99
        3  3                     |       4128       0.98       5.10      16.09
        4  4                     |       4019       0.95       4.96      21.05
        5  5                     |      12522       2.96      15.47      36.52
        6  6                     |       8325       1.97      10.28      46.80
        7  7                     |      12403       2.93      15.32      62.12
        8  8                     |      14059       3.32      17.37      79.49
        9  9                     |       6388       1.51       7.89      87.38
        10 Extremely important   |      10213       2.41      12.62     100.00
        Total                    |      80950      19.13     100.00           
Missing .                        |     340521      80.49                      
        .a Refusal               |         66       0.02                      
        .b Don't know            |       1456       0.34                      
        .c No answer             |         72       0.02                      
        Total                    |     342115      80.87                      
Total                            |     423065     100.00                      
------------------------------------------------------------------------------

. recode qfimedu (0=0 "Extremely unimportant") (1=1) (2=2) (3=3) (4=4) (5=5) (6=6) (7=7) (8=8) (9=9) (10=10 "Extremely important") (else=.), gen(educat
> ionqualification)
(1594 differences between qfimedu and educationqualification)

. 
. 
. * 4.4.2 immigrants' workskills needed in country - variable "workskillsneeded"
. ******************************************************************************
. 
. fre qfimwsk

qfimwsk -- Qualification for immigration: work skills needed in country
------------------------------------------------------------------------------
                                 |      Freq.    Percent      Valid       Cum.
---------------------------------+--------------------------------------------
Valid   0  Extremely unimportant |       4691       1.11       5.78       5.78
        1  1                     |       1404       0.33       1.73       7.51
        2  2                     |       2390       0.56       2.95      10.46
        3  3                     |       2943       0.70       3.63      14.09
        4  4                     |       3110       0.74       3.83      17.92
        5  5                     |       9496       2.24      11.71      29.63
        6  6                     |       7176       1.70       8.85      38.48
        7  7                     |      11829       2.80      14.58      53.06
        8  8                     |      15551       3.68      19.17      72.23
        9  9                     |       8887       2.10      10.96      83.19
        10 Extremely important   |      13634       3.22      16.81     100.00
        Total                    |      81111      19.17     100.00           
Missing .                        |     340521      80.49                      
        .a Refusal               |         66       0.02                      
        .b Don't know            |       1255       0.30                      
        .c No answer             |        112       0.03                      
        Total                    |     341954      80.83                      
Total                            |     423065     100.00                      
------------------------------------------------------------------------------

. recode qfimwsk (0=0 "Extremely unimportant") (1=1) (2=2) (3=3) (4=4) (5=5) (6=6) (7=7) (8=8) (9=9) (10=10 "Extremely important") (else=.), gen(worksk
> illsneeded)
(1433 differences between qfimwsk and workskillsneeded)

. fre workskillsneeded

workskillsneeded -- RECODE of qfimwsk (Qualification for immigration: work skills needed in country)
------------------------------------------------------------------------------
                                 |      Freq.    Percent      Valid       Cum.
---------------------------------+--------------------------------------------
Valid   0  Extremely unimportant |       4691       1.11       5.78       5.78
        1                        |       1404       0.33       1.73       7.51
        2                        |       2390       0.56       2.95      10.46
        3                        |       2943       0.70       3.63      14.09
        4                        |       3110       0.74       3.83      17.92
        5                        |       9496       2.24      11.71      29.63
        6                        |       7176       1.70       8.85      38.48
        7                        |      11829       2.80      14.58      53.06
        8                        |      15551       3.68      19.17      72.23
        9                        |       8887       2.10      10.96      83.19
        10 Extremely important   |      13634       3.22      16.81     100.00
        Total                    |      81111      19.17     100.00           
Missing .                        |     341954      80.83                      
Total                            |     423065     100.00                      
------------------------------------------------------------------------------

. 
. * 4.4.3 immigrants endangering jobs? - variable "endangerjobs"
. **************************************************************
. 
. fre imtcjob

imtcjob -- Immigrants take jobs away in country or create new jobs
------------------------------------------------------------------------
                           |      Freq.    Percent      Valid       Cum.
---------------------------+--------------------------------------------
Valid   0  Take jobs away  |       5489       1.30       6.93       6.93
        1  1               |       3554       0.84       4.49      11.42
        2  2               |       5689       1.34       7.18      18.60
        3  3               |       7651       1.81       9.66      28.26
        4  4               |       7414       1.75       9.36      37.63
        5  5               |      25562       6.04      32.28      69.90
        6  6               |       7901       1.87       9.98      79.88
        7  7               |       7678       1.81       9.70      89.58
        8  8               |       5269       1.25       6.65      96.23
        9  9               |       1459       0.34       1.84      98.07
        10 Create new jobs |       1526       0.36       1.93     100.00
        Total              |      79192      18.72     100.00           
Missing .                  |     340521      80.49                      
        .a Refusal         |         79       0.02                      
        .b Don't know      |       3191       0.75                      
        .c No answer       |         82       0.02                      
        Total              |     343873      81.28                      
Total                      |     423065     100.00                      
------------------------------------------------------------------------

. recode imtcjob (0=0 "Take jobs away") (1=1) (2=2) (3=3) (4=4) (5=5) (6=6) (7=7) (8=8) (9=9) (10=10 "Create new jobs") (else=.), gen(endangerjobs)
(3352 differences between imtcjob and endangerjobs)

. fre endangerjobs

endangerjobs -- RECODE of imtcjob (Immigrants take jobs away in country or create new jobs)
------------------------------------------------------------------------
                           |      Freq.    Percent      Valid       Cum.
---------------------------+--------------------------------------------
Valid   0  Take jobs away  |       5489       1.30       6.93       6.93
        1                  |       3554       0.84       4.49      11.42
        2                  |       5689       1.34       7.18      18.60
        3                  |       7651       1.81       9.66      28.26
        4                  |       7414       1.75       9.36      37.63
        5                  |      25562       6.04      32.28      69.90
        6                  |       7901       1.87       9.98      79.88
        7                  |       7678       1.81       9.70      89.58
        8                  |       5269       1.25       6.65      96.23
        9                  |       1459       0.34       1.84      98.07
        10 Create new jobs |       1526       0.36       1.93     100.00
        Total              |      79192      18.72     100.00           
Missing .                  |     343873      81.28                      
Total                      |     423065     100.00                      
------------------------------------------------------------------------

. 
. * 4.4.4  immigrants take out more or put in more? - variable "freeloading"
. **************************************************************************
. 
. fre imbleco

imbleco -- Taxes and services: immigrants take out more than they put in or less
--------------------------------------------------------------------------------
                                   |      Freq.    Percent      Valid       Cum.
-----------------------------------+--------------------------------------------
Valid   0  Generally take out more |       4990       1.18       6.45       6.45
        1  1                       |       3846       0.91       4.97      11.41
        2  2                       |       7384       1.75       9.54      20.95
        3  3                       |      10166       2.40      13.13      34.08
        4  4                       |       8586       2.03      11.09      45.17
        5  5                       |      24012       5.68      31.01      76.18
        6  6                       |       6263       1.48       8.09      84.27
        7  7                       |       5847       1.38       7.55      91.83
        8  8                       |       3980       0.94       5.14      96.97
        9  9                       |       1110       0.26       1.43      98.40
        10 Generally put in more   |       1239       0.29       1.60     100.00
        Total                      |      77423      18.30     100.00           
Missing .                          |     340521      80.49                      
        .a Refusal                 |         66       0.02                      
        .b Don't know              |       4972       1.18                      
        .c No answer               |         83       0.02                      
        Total                      |     345642      81.70                      
Total                              |     423065     100.00                      
--------------------------------------------------------------------------------

. recode imbleco (0=0 "Generally take out more") (1=1) (2=2) (3=3) (4=4) (5=5) (6=6) (7=7) (8=8) (9=9) (10=10 "Generally put in more") (else=.), gen(fr
> eeloading)
(5121 differences between imbleco and freeloading)

. fre freeloading

freeloading -- RECODE of imbleco (Taxes and services: immigrants take out more than they put in
--------------------------------------------------------------------------------
                                   |      Freq.    Percent      Valid       Cum.
-----------------------------------+--------------------------------------------
Valid   0  Generally take out more |       4990       1.18       6.45       6.45
        1                          |       3846       0.91       4.97      11.41
        2                          |       7384       1.75       9.54      20.95
        3                          |      10166       2.40      13.13      34.08
        4                          |       8586       2.03      11.09      45.17
        5                          |      24012       5.68      31.01      76.18
        6                          |       6263       1.48       8.09      84.27
        7                          |       5847       1.38       7.55      91.83
        8                          |       3980       0.94       5.14      96.97
        9                          |       1110       0.26       1.43      98.40
        10 Generally put in more   |       1239       0.29       1.60     100.00
        Total                      |      77423      18.30     100.00           
Missing .                          |     345642      81.70                      
Total                              |     423065     100.00                      
--------------------------------------------------------------------------------

. 
. 
. 
. * 4.5: saving adapted dataset
. *****************************
. 
. save "ESS_WorldBank_data.dta", replace
file ESS_WorldBank_data.dta saved

. sort _merge

. browse

. 
. ***************
. * Finalisation:
. ***************
. 
. log close // closing the log-file
      name:  <unnamed>
       log:  /Users/silja/Desktop/Empirical Research Paper_19June22/DataPreparation.log
  log type:  text
 closed on:  19 Jun 2022, 10:41:34
-------------------------------------------------------------------------------------------------------------------------------------------------------
